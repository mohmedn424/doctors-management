import{r as C,a as ws,g as wn,R as js,I as Cs,_ as Ps,s as Oe,b as Ft,c as it,d as Pt,t as Et,L as Es,M as jn,C as $e,B as Ve,e as Cn,T as re,S as pt,D as pe,F as I,f as Te,h as Pn,i as H,j as Be,k as xe,l as Ce,m as En,n as Rn,o as _n,p as In,q as On,u as Ye,v as mt,w as Tn,x as Mn}from"./antd-CP7aTbfJ.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var Rs={exports:{}},ot={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kn=C,Ln=Symbol.for("react.element"),Dn=Symbol.for("react.fragment"),An=Object.prototype.hasOwnProperty,Fn=kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Nn={key:!0,ref:!0,__self:!0,__source:!0};function _s(n,e,t){var s,r={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)An.call(e,s)&&!Nn.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:Ln,type:n,key:i,ref:o,props:r,_owner:Fn.current}}ot.Fragment=Dn;ot.jsx=_s;ot.jsxs=_s;Rs.exports=ot;var c=Rs.exports,Rt={},Yt=ws;Rt.createRoot=Yt.createRoot,Rt.hydrateRoot=Yt.hydrateRoot;const Gt="pushstate",Jt="popstate",Is="beforeunload",Os=n=>(n.preventDefault(),n.returnValue=""),$n=()=>{removeEventListener(Is,Os,{capture:!0})};function Ts(n){let e=n.getLocation();const t=new Set;let s=[];const r=()=>{e=n.getLocation(),t.forEach(o=>o())},i=async(o,a)=>{var u;if(!((a==null?void 0:a.ignoreBlocker)??!1)&&typeof document<"u"&&s.length){for(const d of s)if(!await d()){(u=n.onBlocked)==null||u.call(n,r);return}}o()};return{get location(){return e},subscribers:t,subscribe:o=>(t.add(o),()=>{t.delete(o)}),push:(o,a,u)=>{a=Fe(a),i(()=>{n.pushState(o,a),r()},u)},replace:(o,a,u)=>{a=Fe(a),i(()=>{n.replaceState(o,a),r()},u)},go:(o,a)=>{i(()=>{n.go(o),r()},a)},back:o=>{i(()=>{n.back(),r()},o)},forward:o=>{i(()=>{n.forward(),r()},o)},createHref:o=>n.createHref(o),block:o=>(s.push(o),s.length===1&&addEventListener(Is,Os,{capture:!0}),()=>{s=s.filter(a=>a!==o),s.length||$n()}),flush:()=>{var o;return(o=n.flush)==null?void 0:o.call(n)},destroy:()=>{var o;return(o=n.destroy)==null?void 0:o.call(n)},notify:r}}function Fe(n){return n||(n={}),{...n,key:Ms()}}function Vn(n){const e=typeof document<"u"?window:void 0,t=e.history.pushState,s=e.history.replaceState,r=g=>g,i=()=>_t(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state);let o=i(),a;const u=()=>o;let l,d;const h=()=>{if(!l)return;(l.isPush?t:s).call(e.history,l.state,"",l.href),l=void 0,d=void 0,a=void 0},p=(g,y,v)=>{const w=r(y);d||(a=o),o=_t(y,v),l={href:w,state:v,isPush:(l==null?void 0:l.isPush)||g==="push"},d||(d=Promise.resolve().then(()=>h()))},f=()=>{o=i(),m.notify()},m=Ts({getLocation:u,pushState:(g,y)=>p("push",g,y),replaceState:(g,y)=>p("replace",g,y),back:()=>e.history.back(),forward:()=>e.history.forward(),go:g=>e.history.go(g),createHref:g=>r(g),flush:h,destroy:()=>{e.history.pushState=t,e.history.replaceState=s,e.removeEventListener(Gt,f),e.removeEventListener(Jt,f)},onBlocked:g=>{a&&o!==a&&(o=a,g())}});return e.addEventListener(Gt,f),e.addEventListener(Jt,f),e.history.pushState=function(...g){const y=t.apply(e.history,g);return f(),y},e.history.replaceState=function(...g){const y=s.apply(e.history,g);return f(),y},m}function Bn(n={initialEntries:["/"]}){const e=n.initialEntries;let t=n.initialIndex??e.length-1,s={key:Ms()};return Ts({getLocation:()=>_t(e[t],s),pushState:(i,o)=>{s=o,e.splice,t<e.length-1&&e.splice(t+1),e.push(i),t=Math.max(e.length-1,0)},replaceState:(i,o)=>{s=o,e[t]=i},back:()=>{s=Fe(s),t=Math.max(t-1,0)},forward:()=>{s=Fe(s),t=Math.min(t+1,e.length-1)},go:i=>{s=Fe(s),t=Math.min(Math.max(t+i,0),e.length-1)},createHref:i=>i})}function _t(n,e){const t=n.indexOf("#"),s=n.indexOf("?");return{href:n,pathname:n.substring(0,t>0?s>0?Math.min(t,s):t:s>0?s:n.length),hash:t>-1?n.substring(t):"",search:s>-1?n.slice(s,t===-1?void 0:t):"",state:e||{}}}function Ms(){return(Math.random()+1).toString(36).substring(7)}var Un="Invariant failed";function Y(n,e){if(!n)throw new Error(Un)}const gt=C.createContext(null);function ks(){return typeof document>"u"?gt:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=gt,gt)}function ge(n){const e=C.useContext(ks());return n==null||n.warn,e}var Ls={exports:{}},Ds={},As={exports:{}},Fs={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Me=C;function zn(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var qn=typeof Object.is=="function"?Object.is:zn,Kn=Me.useState,Wn=Me.useEffect,Hn=Me.useLayoutEffect,Yn=Me.useDebugValue;function Gn(n,e){var t=e(),s=Kn({inst:{value:t,getSnapshot:e}}),r=s[0].inst,i=s[1];return Hn(function(){r.value=t,r.getSnapshot=e,yt(r)&&i({inst:r})},[n,t,e]),Wn(function(){return yt(r)&&i({inst:r}),n(function(){yt(r)&&i({inst:r})})},[n]),Yn(t),t}function yt(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!qn(n,t)}catch{return!0}}function Jn(n,e){return e()}var Qn=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Jn:Gn;Fs.useSyncExternalStore=Me.useSyncExternalStore!==void 0?Me.useSyncExternalStore:Qn;As.exports=Fs;var Xn=As.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var at=C,Zn=Xn;function er(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var tr=typeof Object.is=="function"?Object.is:er,sr=Zn.useSyncExternalStore,nr=at.useRef,rr=at.useEffect,ir=at.useMemo,or=at.useDebugValue;Ds.useSyncExternalStoreWithSelector=function(n,e,t,s,r){var i=nr(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=ir(function(){function u(f){if(!l){if(l=!0,d=f,f=s(f),r!==void 0&&o.hasValue){var m=o.value;if(r(m,f))return h=m}return h=f}if(m=h,tr(d,f))return m;var g=s(f);return r!==void 0&&r(m,g)?m:(d=f,h=g)}var l=!1,d,h,p=t===void 0?null:t;return[function(){return u(e())},p===null?void 0:function(){return u(p())}]},[e,t,s,r]);var a=sr(n,i[0],i[1]);return rr(function(){o.hasValue=!0,o.value=a},[a]),or(a),a};Ls.exports=Ds;var ar=Ls.exports;class cr{constructor(e,t){this.listeners=new Set,this._batching=!1,this._flushing=0,this.subscribe=s=>{var r,i;this.listeners.add(s);const o=(i=(r=this.options)==null?void 0:r.onSubscribe)==null?void 0:i.call(r,s,this);return()=>{this.listeners.delete(s),o==null||o()}},this.setState=s=>{var r,i,o;const a=this.state;this.state=(r=this.options)!=null&&r.updateFn?this.options.updateFn(a)(s):s(a),(o=(i=this.options)==null?void 0:i.onUpdate)==null||o.call(i),this._flush()},this._flush=()=>{if(this._batching)return;const s=++this._flushing;this.listeners.forEach(r=>{this._flushing===s&&r()})},this.batch=s=>{if(this._batching)return s();this._batching=!0,s(),this._batching=!1,this._flush()},this.state=e,this.options=t}}function lr(n,e=t=>t){return ar.useSyncExternalStoreWithSelector(n.subscribe,()=>n.state,()=>n.state,e,ur)}function ur(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let s=0;s<t.length;s++)if(!Object.prototype.hasOwnProperty.call(e,t[s])||!Object.is(n[t[s]],e[t[s]]))return!1;return!0}const J="__root__";function dr(n,e){let t,s,r,i="";for(t in n)if((r=n[t])!==void 0)if(Array.isArray(r))for(s=0;s<r.length;s++)i&&(i+="&"),i+=encodeURIComponent(t)+"="+encodeURIComponent(r[s]);else i&&(i+="&"),i+=encodeURIComponent(t)+"="+encodeURIComponent(r);return""+i}function Qt(n){if(!n)return"";const e=decodeURIComponent(n);return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function hr(n,e){let t,s;const r={},i=n.split("&");for(;t=i.shift();){const o=t.indexOf("=");if(o!==-1){s=t.slice(0,o);const a=t.slice(o+1);r[s]!==void 0?r[s]=[].concat(r[s],Qt(a)):r[s]=Qt(a)}else s=t,r[s]=""}return r}const fr=mr(JSON.parse),pr=gr(JSON.stringify,JSON.parse);function mr(n){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const t=hr(e);for(const s in t){const r=t[s];if(typeof r=="string")try{t[s]=n(r)}catch{}}return t}}function gr(n,e){function t(s){if(typeof s=="object"&&s!==null)try{return n(s)}catch{}else if(typeof s=="string"&&typeof e=="function")try{return e(s),n(s)}catch{}return s}return s=>{s={...s},Object.keys(s).forEach(i=>{const o=s[i];typeof o>"u"||o===void 0?delete s[i]:s[i]=t(o)});const r=dr(s).toString();return r?`?${r}`:""}}function Je(n){return n[n.length-1]}function yr(n){return typeof n=="function"}function Re(n,e){return yr(n)?n(e):n}function Ne(n,e){return e.reduce((t,s)=>(t[s]=n[s],t),{})}function oe(n,e){if(n===e)return n;const t=e,s=Zt(n)&&Zt(t);if(s||Qe(n)&&Qe(t)){const r=s?n:Object.keys(n),i=r.length,o=s?t:Object.keys(t),a=o.length,u=s?[]:{};let l=0;for(let d=0;d<a;d++){const h=s?d:o[d];(!s&&r.includes(h)||s)&&n[h]===void 0&&t[h]===void 0?(u[h]=void 0,l++):(u[h]=oe(n[h],t[h]),u[h]===n[h]&&n[h]!==void 0&&l++)}return i===a&&l===i?n:u}return t}function Qe(n){if(!Xt(n))return!1;const e=n.constructor;if(typeof e>"u")return!0;const t=e.prototype;return!(!Xt(t)||!t.hasOwnProperty("isPrototypeOf"))}function Xt(n){return Object.prototype.toString.call(n)==="[object Object]"}function Zt(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function _e(n,e,t=!1){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(Qe(n)&&Qe(e)){const s=Object.keys(n).filter(i=>n[i]!==void 0),r=Object.keys(e).filter(i=>e[i]!==void 0);return!t&&s.length!==r.length?!1:!r.some(i=>!(i in n)||!_e(n[i],e[i],t))}return Array.isArray(n)&&Array.isArray(e)?n.length!==e.length?!1:!n.some((s,r)=>!_e(s,e[r],t)):!1}const vt=typeof window<"u"?C.useLayoutEffect:C.useEffect;function Ee(n){let e,t;const s=new Promise((r,i)=>{e=r,t=i});return s.status="pending",s.resolve=r=>{s.status="resolved",s.value=r,e(r),n==null||n(r)},s.reject=r=>{s.status="rejected",t(r)},s}function es(n){const e=C.useRef({value:n,prev:null}),t=e.current.value;return n!==t&&(e.current={value:n,prev:t}),e.current.prev}function me(n){return ct(n.filter(Boolean).join("/"))}function ct(n){return n.replace(/\/{2,}/g,"/")}function Nt(n){return n==="/"?n:n.replace(/^\/{1,}/,"")}function je(n){return n==="/"?n:n.replace(/\/{1,}$/,"")}function vr(n){return je(Nt(n))}function Xe(n,e){return n.endsWith("/")&&n!=="/"&&n!==`${e}/`?n.slice(0,-1):n}function br(n,e,t){return Xe(n,t)===Xe(e,t)}function Sr({basepath:n,base:e,to:t,trailingSlash:s="never"}){var r,i;e=Ze(n,e),t=Ze(n,t);let o=ke(e);const a=ke(t);o.length>1&&((r=Je(o))==null?void 0:r.value)==="/"&&o.pop(),a.forEach((l,d)=>{l.value==="/"?d?d===a.length-1&&o.push(l):o=[l]:l.value===".."?o.pop():l.value==="."||o.push(l)}),o.length>1&&(((i=Je(o))==null?void 0:i.value)==="/"?s==="never"&&o.pop():s==="always"&&o.push({type:"pathname",value:"/"}));const u=me([n,...o.map(l=>l.value)]);return ct(u)}function ke(n){if(!n)return[];n=ct(n);const e=[];if(n.slice(0,1)==="/"&&(n=n.substring(1),e.push({type:"pathname",value:"/"})),!n)return e;const t=n.split("/").filter(Boolean);return e.push(...t.map(s=>s==="$"||s==="*"?{type:"wildcard",value:s}:s.charAt(0)==="$"?{type:"param",value:s}:{type:"pathname",value:decodeURIComponent(s)})),n.slice(-1)==="/"&&(n=n.substring(1),e.push({type:"pathname",value:"/"})),e}function bt({path:n,params:e,leaveWildcards:t,leaveParams:s}){const r=ke(n),i={};for(const[o,a]of Object.entries(e)){const u=typeof a=="string";["*","_splat"].includes(o)?i[o]=u?encodeURI(a):a:i[o]=u?encodeURIComponent(a):a}return me(r.map(o=>{if(o.type==="wildcard"){const a=i._splat;return t?`${o.value}${a??""}`:a}if(o.type==="param"){if(s){const a=i[o.value];return`${o.value}${a??""}`}return i[o.value.substring(1)]??"undefined"}return o.value}))}function qe(n,e,t){const s=xr(n,e,t);if(!(t.to&&!s))return s??{}}function Ze(n,e){switch(!0){case n==="/":return e;case e===n:return"";case e.length<n.length:return e;case e[n.length]!=="/":return e;case e.startsWith(n):return e.slice(n.length);default:return e}}function xr(n,e,t){e=Ze(n,e);const s=Ze(n,`${t.to??"$"}`),r=ke(e),i=ke(s);e.startsWith("/")||r.unshift({type:"pathname",value:"/"}),s.startsWith("/")||i.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let u=0;u<Math.max(r.length,i.length);u++){const l=r[u],d=i[u],h=u>=r.length-1,p=u>=i.length-1;if(d){if(d.type==="wildcard"){if(l!=null&&l.value){const f=decodeURI(me(r.slice(u).map(m=>m.value)));return o["*"]=f,o._splat=f,!0}return!1}if(d.type==="pathname"){if(d.value==="/"&&!(l!=null&&l.value))return!0;if(l){if(t.caseSensitive){if(d.value!==l.value)return!1}else if(d.value.toLowerCase()!==l.value.toLowerCase())return!1}}if(!l)return!1;if(d.type==="param"){if(l.value==="/")return!1;l.value.charAt(0)!=="$"&&(o[d.value.substring(1)]=decodeURIComponent(l.value))}}if(!h&&p)return o["**"]=me(r.slice(u+1).map(f=>f.value)),!!t.fuzzy&&(d==null?void 0:d.value)!=="/"}return!0})()?o:void 0}function Se(n){return!!(n!=null&&n.isRedirect)}function ts(n){return!!(n!=null&&n.isRedirect)&&n.href}function $t(n){const e=n.errorComponent??lt;return c.jsx(wr,{getResetKey:n.getResetKey,onCatch:n.onCatch,children:({error:t,reset:s})=>t?C.createElement(e,{error:t,reset:s}):n.children})}class wr extends C.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,t){t.error&&t.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,t){this.props.onCatch&&this.props.onCatch(e,t)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function lt({error:n}){const[e,t]=C.useState(!1);return c.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[c.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),c.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>t(s=>!s),children:e?"Hide Error":"Show Error"})]}),c.jsx("div",{style:{height:".25rem"}}),e?c.jsx("div",{children:c.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:n.message?c.jsx("code",{children:n.message}):null})}):null]})}function q(n){const e=ge({warn:(n==null?void 0:n.router)===void 0});return lr(((n==null?void 0:n.router)||e).__store,n==null?void 0:n.select)}function ae(n){return!!(n!=null&&n.isNotFound)}function jr(n){const e=q({select:t=>`not-found-${t.location.pathname}-${t.status}`});return c.jsx($t,{getResetKey:()=>e,onCatch:(t,s)=>{var r;if(ae(t))(r=n.onCatch)==null||r.call(n,t,s);else throw t},errorComponent:({error:t})=>{var s;return(s=n.fallback)==null?void 0:s.call(n,t)},children:n.children})}function Cr(){return c.jsx("p",{children:"Not Found"})}const Pr=["component","errorComponent","pendingComponent","notFoundComponent"];function Er(n){return new Rr(n)}class Rr{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.subscribers=new Set,this.startReactTransition=t=>t(),this.update=t=>{t.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const s=this.options;this.options={...this.options,...t},this.isServer=this.options.isServer??typeof document>"u",(!this.basepath||t.basepath&&t.basepath!==s.basepath)&&(t.basepath===void 0||t.basepath===""||t.basepath==="/"?this.basepath="/":this.basepath=`/${vr(t.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?Bn({initialEntries:[this.basepath||"/"]}):Vn()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new cr(Or(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(r=>!["redirected"].includes(r.status))}}}))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const t=this.options.notFoundRoute;t&&(t.init({originalIndex:99999999999}),this.routesById[t.id]=t);const s=o=>{o.forEach((a,u)=>{a.init({originalIndex:u});const l=this.routesById[a.id];if(Y(!l,`Duplicate routes found with id: ${String(a.id)}`),this.routesById[a.id]=a,!a.isRoot&&a.path){const h=je(a.fullPath);(!this.routesByPath[h]||a.fullPath.endsWith("/"))&&(this.routesByPath[h]=a)}const d=a.children;d!=null&&d.length&&s(d)})};s([this.routeTree]);const r=[];Object.values(this.routesById).forEach((o,a)=>{var u;if(o.isRoot||!o.path)return;const l=Nt(o.fullPath),d=ke(l);for(;d.length>1&&((u=d[0])==null?void 0:u.value)==="/";)d.shift();const h=d.map(p=>p.value==="/"?.75:p.type==="param"?.5:p.type==="wildcard"?.25:1);r.push({child:o,trimmed:l,parsed:d,index:a,scores:h})}),this.flatRoutes=r.sort((o,a)=>{const u=Math.min(o.scores.length,a.scores.length);for(let l=0;l<u;l++)if(o.scores[l]!==a.scores[l])return a.scores[l]-o.scores[l];if(o.scores.length!==a.scores.length)return a.scores.length-o.scores.length;for(let l=0;l<u;l++)if(o.parsed[l].value!==a.parsed[l].value)return o.parsed[l].value>a.parsed[l].value?1:-1;return o.index-a.index}).map((o,a)=>(o.child.rank=a,o.child))},this.subscribe=(t,s)=>{const r={eventType:t,fn:s};return this.subscribers.add(r),()=>{this.subscribers.delete(r)}},this.emit=t=>{this.subscribers.forEach(s=>{s.eventType===t.type&&s.fn(t)})},this.parseLocation=t=>{const s=({pathname:a,search:u,hash:l,state:d})=>{const h=this.options.parseSearch(u),p=this.options.stringifySearch(h);return{pathname:a,searchStr:p,search:oe(t==null?void 0:t.search,h),hash:l.split("#").reverse()[0]??"",href:`${a}${p}${l}`,state:oe(t==null?void 0:t.state,d)}},r=s(this.history.location),{__tempLocation:i,__tempKey:o}=r.state;if(i&&(!o||o===this.tempLocationKey)){const a=s(i);return a.state.key=r.state.key,delete a.state.__tempLocation,{...a,maskedLocation:r}}return r},this.resolvePathWithBase=(t,s)=>Sr({basepath:this.basepath,base:t,to:ct(s),trailingSlash:this.options.trailingSlash}),this.matchRoutes=(t,s,r)=>{let i={};const o=this.flatRoutes.find(f=>{const m=qe(this.basepath,je(t),{to:f.fullPath,caseSensitive:f.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});return m?(i=m,!0):!1});let a=o||this.routesById[J];const u=[a];let l=!1;for((o?o.path!=="/"&&i["**"]:je(t))&&(this.options.notFoundRoute?u.push(this.options.notFoundRoute):l=!0);a.parentRoute;)a=a.parentRoute,u.unshift(a);const d=(()=>{if(l){if(this.options.notFoundMode!=="root")for(let f=u.length-1;f>=0;f--){const m=u[f];if(m.children)return m.id}return J}})(),h=u.map(f=>{var m;let g;const y=((m=f.options.params)==null?void 0:m.parse)??f.options.parseParams;if(y)try{const v=y(i);Object.assign(i,v)}catch(v){if(g=new Ir(v.message,{cause:v}),r!=null&&r.throwOnError)throw g;return g}}),p=[];return u.forEach((f,m)=>{var g,y,v,w,b,S,R,E,j,x;const _=p[m-1],[L,T]=(()=>{const N=(_==null?void 0:_.search)??s;try{const K=typeof f.options.validateSearch=="object"?f.options.validateSearch.parse:f.options.validateSearch,W=(K==null?void 0:K(N))??{};return[{...N,...W},void 0]}catch(K){const W=new _r(K.message,{cause:K});if(r!=null&&r.throwOnError)throw W;return[N,W]}})(),M=((y=(g=f.options).loaderDeps)==null?void 0:y.call(g,{search:L}))??"",k=M?JSON.stringify(M):"",O=bt({path:f.fullPath,params:i}),A=bt({path:f.id,params:i,leaveWildcards:!0})+k,U=this.getMatch(A),ie=this.state.matches.find(N=>N.id===A)?"stay":"enter";let F;if(U)F={...U,cause:ie,params:i};else{const N=f.options.loader||f.options.beforeLoad||f.lazyFn?"pending":"success";F={id:A,index:m,routeId:f.id,params:i,pathname:me([this.basepath,O]),updatedAt:Date.now(),search:{},searchError:void 0,status:N,isFetching:!1,error:void 0,paramsError:h[m],routeContext:void 0,context:void 0,abortController:new AbortController,fetchCount:0,cause:ie,loaderDeps:M,invalid:!1,preload:!1,links:(w=(v=f.options).links)==null?void 0:w.call(v),scripts:(S=(b=f.options).scripts)==null?void 0:S.call(b),staticData:f.options.staticData||{},loadPromise:Ee()}}F.status==="success"&&(F.meta=(E=(R=f.options).meta)==null?void 0:E.call(R,{matches:p,match:F,params:F.params,loaderData:F.loaderData}),F.headers=(x=(j=f.options).headers)==null?void 0:x.call(j,{loaderData:F.loaderData})),r!=null&&r.preload||(F.globalNotFound=d===f.id),F.search=oe(F.search,L),F.searchError=T,p.push(F)}),p},this.cancelMatch=t=>{const s=this.getMatch(t);s&&(s.abortController.abort(),clearTimeout(s.pendingTimeout))},this.cancelMatches=()=>{var t;(t=this.state.pendingMatches)==null||t.forEach(s=>{this.cancelMatch(s.id)})},this.buildLocation=t=>{const s=(i={},o)=>{var a,u,l;const d=i._fromLocation!=null?this.matchRoutes(i._fromLocation.pathname,i.fromSearch||i._fromLocation.search):this.state.matches,h=i.from!=null?d.find(k=>qe(this.basepath,je(k.pathname),{to:i.from,caseSensitive:!1,fuzzy:!1})):void 0,p=(h==null?void 0:h.pathname)||this.latestLocation.pathname;Y(i.from==null||h!=null,"Could not find match for from: "+i.from);const f=((a=Je(d))==null?void 0:a.search)||this.latestLocation.search,m=o==null?void 0:o.filter(k=>d.find(O=>O.routeId===k.routeId)),g=this.routesById[(u=m==null?void 0:m.find(k=>k.pathname===p))==null?void 0:u.routeId];let y=i.to?this.resolvePathWithBase(p,`${i.to}`):this.resolvePathWithBase(p,(g==null?void 0:g.to)??p);const v={...(l=Je(d))==null?void 0:l.params};let w=(i.params??!0)===!0?v:{...v,...Re(i.params,v)};Object.keys(w).length>0&&(o==null||o.map(k=>{var O;const A=this.looseRoutesById[k.routeId];return((O=A==null?void 0:A.options.params)==null?void 0:O.stringify)??A.options.stringifyParams}).filter(Boolean).forEach(k=>{w={...w,...k(w)}})),y=bt({path:y,params:w??{},leaveWildcards:!1,leaveParams:t.leaveParams});const b=(m==null?void 0:m.map(k=>this.looseRoutesById[k.routeId].options.preSearchFilters??[]).flat().filter(Boolean))??[],S=(m==null?void 0:m.map(k=>this.looseRoutesById[k.routeId].options.postSearchFilters??[]).flat().filter(Boolean))??[],R=b.length?b.reduce((k,O)=>O(k),f):f,E=i.search===!0?R:i.search?Re(i.search,R):b.length?R:{},j=S.length?S.reduce((k,O)=>O(k),E):E,x=oe(f,j),_=this.options.stringifySearch(x),L=i.hash===!0?this.latestLocation.hash:i.hash?Re(i.hash,this.latestLocation.hash):void 0,T=L?`#${L}`:"";let M=i.state===!0?this.latestLocation.state:i.state?Re(i.state,this.latestLocation.state):{};return M=oe(this.latestLocation.state,M),{pathname:y,search:x,searchStr:_,state:M,hash:L??"",href:`${y}${_}${T}`,unmaskOnReload:i.unmaskOnReload}},r=(i={},o)=>{var a;const u=s(i);let l=o?s(o):void 0;if(!l){let m={};const g=(a=this.options.routeMasks)==null?void 0:a.find(y=>{const v=qe(this.basepath,u.pathname,{to:y.from,caseSensitive:!1,fuzzy:!1});return v?(m=v,!0):!1});if(g){const{from:y,...v}=g;o={...Ne(t,["from"]),...v,params:m},l=s(o)}}const d=this.matchRoutes(u.pathname,u.search),h=l?this.matchRoutes(l.pathname,l.search):void 0,p=l?s(o,h):void 0,f=s(i,d);return p&&(f.maskedLocation=p),f};return t.mask?r(t,{...Ne(t,["from"]),...t.mask}):r(t)},this.commitLocation=({viewTransition:t,ignoreBlocker:s,...r})=>{const i=()=>{r.state.key=this.latestLocation.state.key;const u=_e(r.state,this.latestLocation.state);return delete r.state.key,u},o=this.latestLocation.href===r.href,a=this.commitLocationPromise;if(this.commitLocationPromise=Ee(()=>{a==null||a.resolve()}),o&&i())this.load();else{let{maskedLocation:u,...l}=r;u&&(l={...u,state:{...u.state,__tempKey:void 0,__tempLocation:{...l,search:l.searchStr,state:{...l.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(l.unmaskOnReload??this.options.unmaskOnReload??!1)&&(l.state.__tempKey=this.tempLocationKey)),this.shouldViewTransition=t,this.history[r.replace?"replace":"push"](l.href,l.state,{ignoreBlocker:s})}return this.resetNextScroll=r.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:t,resetScroll:s,viewTransition:r,ignoreBlocker:i,...o}={})=>{const a=this.buildLocation(o);return this.commitLocation({...a,viewTransition:r,replace:t,resetScroll:s,ignoreBlocker:i})},this.navigate=({from:t,to:s,__isRedirect:r,...i})=>{const o=String(s);let a;try{new URL(`${o}`),a=!0}catch{}return Y(!a),this.buildAndCommitLocation({...i,from:t,to:s})},this.load=async()=>{this.latestLocation=this.parseLocation(this.latestLocation),this.__store.setState(i=>({...i,loadedAt:Date.now()}));let t,s;const r=new Promise(i=>{this.startReactTransition(async()=>{var o;try{const a=this.latestLocation,u=this.state.resolvedLocation,l=u.href!==a.href;this.cancelMatches();let d;this.__store.batch(()=>{d=this.matchRoutes(a.pathname,a.search),this.__store.setState(h=>({...h,status:"pending",isLoading:!0,location:a,pendingMatches:d,cachedMatches:h.cachedMatches.filter(p=>!d.find(f=>f.id===p.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:u,toLocation:a,pathChanged:l}),this.emit({type:"onBeforeLoad",fromLocation:u,toLocation:a,pathChanged:l}),await this.loadMatches({matches:d,location:a,onReady:async()=>{this.startViewTransition(async()=>{let h,p,f;this.__store.batch(()=>{this.__store.setState(m=>{const g=m.matches,y=m.pendingMatches||m.matches;return h=g.filter(v=>!y.find(w=>w.id===v.id)),p=y.filter(v=>!g.find(w=>w.id===v.id)),f=g.filter(v=>y.find(w=>w.id===v.id)),{...m,isLoading:!1,matches:y,pendingMatches:void 0,cachedMatches:[...m.cachedMatches,...h.filter(v=>v.status!=="error")]}}),this.cleanCache()}),[[h,"onLeave"],[p,"onEnter"],[f,"onStay"]].forEach(([m,g])=>{m.forEach(y=>{var v,w;(w=(v=this.looseRoutesById[y.routeId].options)[g])==null||w.call(v,y)})})})}})}catch(a){ts(a)?(t=a,this.isServer||this.navigate({...a,replace:!0,__isRedirect:!0})):ae(a)&&(s=a),this.__store.setState(u=>({...u,statusCode:t?t.statusCode:s?404:u.matches.some(l=>l.status==="error")?500:200,redirect:t}))}this.latestLoadPromise===r&&((o=this.commitLocationPromise)==null||o.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),i()})});for(this.latestLoadPromise=r,await r;this.latestLoadPromise&&r!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=t=>{var s,r;const i=this.shouldViewTransition??this.options.defaultViewTransition;delete this.shouldViewTransition,(r=(s=i&&typeof document<"u"?document:void 0)==null?void 0:s.startViewTransition)!=null&&r.call(s,t)||t()},this.updateMatch=(t,s)=>{var r;let i;const o=(r=this.state.pendingMatches)==null?void 0:r.find(l=>l.id===t),a=this.state.matches.find(l=>l.id===t),u=o?"pendingMatches":a?"matches":"cachedMatches";return this.__store.setState(l=>{var d;return{...l,[u]:(d=l[u])==null?void 0:d.map(h=>h.id===t?i=s(h):h)}}),i},this.getMatch=t=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(s=>s.id===t),this.loadMatches=async({location:t,matches:s,preload:r,onReady:i,updateMatch:o=this.updateMatch})=>{let a,u=!1;const l=async()=>{u||(u=!0,await(i==null?void 0:i()))};!this.isServer&&!this.state.matches.length&&l();const d=(h,p)=>{var f,m,g;if(ts(p))throw p;if(Se(p)||ae(p)){if(o(h.id,y=>({...y,status:Se(p)?"redirected":ae(p)?"notFound":"error",isFetching:!1,error:p,beforeLoadPromise:void 0,loaderPromise:void 0})),p.routeId||(p.routeId=h.routeId),(f=h.beforeLoadPromise)==null||f.resolve(),(m=h.loaderPromise)==null||m.resolve(),(g=h.loadPromise)==null||g.resolve(),Se(p))throw u=!0,p=this.resolveRedirect({...p,_fromLocation:t}),p;if(ae(p))throw this._handleNotFound(s,p,{updateMatch:o}),p}};try{await new Promise((h,p)=>{(async()=>{var f,m,g;try{const y=(b,S,R)=>{var E,j;const{id:x,routeId:_}=s[b],L=this.looseRoutesById[_];if(S instanceof Promise)throw S;S.routerCode=R,a=a??b,d(this.getMatch(x),S);try{(j=(E=L.options).onError)==null||j.call(E,S)}catch(T){S=T,d(this.getMatch(x),S)}o(x,T=>{var M;return(M=T.beforeLoadPromise)==null||M.resolve(),{...T,error:S,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[b,{id:S,routeId:R}]of s.entries()){const E=this.getMatch(S);if(E.beforeLoadPromise||E.loaderPromise)await E.beforeLoadPromise;else{try{o(S,$=>({...$,loadPromise:Ee(()=>{var ee;(ee=$.loadPromise)==null||ee.resolve()}),beforeLoadPromise:Ee()}));const j=this.looseRoutesById[R],x=new AbortController,_=(f=s[b-1])==null?void 0:f.id,L=()=>_?this.getMatch(_).context??this.options.context??{}:this.options.context??{},T=j.options.pendingMs??this.options.defaultPendingMs,M=!!(i&&!this.isServer&&!r&&(j.options.loader||j.options.beforeLoad)&&typeof T=="number"&&T!==1/0&&(j.options.pendingComponent??this.options.defaultPendingComponent));let k;M&&(k=setTimeout(()=>{try{l()}catch{}},T));const{paramsError:O,searchError:A}=this.getMatch(S);O&&y(b,O,"PARSE_PARAMS"),A&&y(b,A,"VALIDATE_SEARCH");const U=L();o(S,$=>({...$,isFetching:"beforeLoad",fetchCount:$.fetchCount+1,routeContext:oe($.routeContext,U),context:oe($.context,U),abortController:x,pendingTimeout:k}));const{search:ie,params:F,routeContext:N,cause:K}=this.getMatch(S),W={search:ie,abortController:x,params:F,preload:!!r,context:N,location:t,navigate:$=>this.navigate({...$,_fromLocation:t}),buildLocation:this.buildLocation,cause:r?"preload":K},Z=await((g=(m=j.options).beforeLoad)==null?void 0:g.call(m,W))??{};(Se(Z)||ae(Z))&&y(b,Z,"BEFORE_LOAD"),o(S,$=>{const ee={...$.routeContext,...Z};return{...$,routeContext:oe($.routeContext,ee),context:oe($.context,ee),abortController:x}})}catch(j){y(b,j,"BEFORE_LOAD")}o(S,j=>{var x;return(x=j.beforeLoadPromise)==null||x.resolve(),{...j,beforeLoadPromise:void 0,isFetching:!1}})}}const v=s.slice(0,a),w=[];v.forEach(({id:b,routeId:S},R)=>{w.push((async()=>{const{loaderPromise:E}=this.getMatch(b);if(E)await E;else{const j=w[R-1],x=this.looseRoutesById[S],_=()=>{const{params:N,loaderDeps:K,abortController:W,context:Z,cause:$}=this.getMatch(b);return{params:N,deps:K,preload:!!r,parentMatchPromise:j,abortController:W,context:Z,location:t,navigate:ee=>this.navigate({...ee,_fromLocation:t}),cause:r?"preload":$,route:x}},L=Date.now()-this.getMatch(b).updatedAt,T=r?x.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:x.options.staleTime??this.options.defaultStaleTime??0,M=x.options.shouldReload,k=typeof M=="function"?M(_()):M;o(b,N=>({...N,loaderPromise:Ee(),preload:!!r&&!this.state.matches.find(K=>K.id===b)}));const O=async()=>{var N,K,W,Z,$,ee,ze,he;try{const fe=async()=>{const te=this.getMatch(b);te.minPendingPromise&&await te.minPendingPromise};try{x._lazyPromise=x._lazyPromise||(x.lazyFn?x.lazyFn().then(D=>{Object.assign(x.options,D.options)}):Promise.resolve());const te=this.getMatch(b).componentsPromise||x._lazyPromise.then(()=>Promise.all(Pr.map(async D=>{const be=x.options[D];be!=null&&be.preload&&await be.preload()})));o(b,D=>({...D,isFetching:"loader",componentsPromise:te})),await x._lazyPromise;let se=await((K=(N=x.options).loader)==null?void 0:K.call(N,_()));this.serializeLoaderData&&(se=this.serializeLoaderData(se,{router:this,match:this.getMatch(b)})),d(this.getMatch(b),se),await fe();const le=(Z=(W=x.options).meta)==null?void 0:Z.call(W,{matches:s,match:this.getMatch(b),params:this.getMatch(b).params,loaderData:se}),V=(ee=($=x.options).headers)==null?void 0:ee.call($,{loaderData:se});o(b,D=>({...D,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:se,meta:le,headers:V}))}catch(te){let se=te;await fe(),d(this.getMatch(b),te);try{(he=(ze=x.options).onError)==null||he.call(ze,te)}catch(le){se=le,d(this.getMatch(b),le)}o(b,le=>({...le,error:se,status:"error",isFetching:!1}))}await this.getMatch(b).componentsPromise}catch(fe){d(this.getMatch(b),fe)}},{status:A,invalid:U}=this.getMatch(b);A==="success"&&(U||(k??L>T))?(async()=>{try{await O()}catch{}})():A!=="success"&&await O();const{loaderPromise:ie,loadPromise:F}=this.getMatch(b);ie==null||ie.resolve(),F==null||F.resolve()}o(b,j=>({...j,isFetching:!1,loaderPromise:void 0}))})())}),await Promise.all(w),h()}catch(y){p(y)}})()}),await l()}catch(h){if(Se(h)||ae(h))throw ae(h)&&!r&&await l(),h}return s},this.invalidate=()=>{const t=s=>({...s,invalid:!0,...s.status==="error"?{status:"pending",error:void 0}:{}});return this.__store.setState(s=>{var r;return{...s,matches:s.matches.map(t),cachedMatches:s.cachedMatches.map(t),pendingMatches:(r=s.pendingMatches)==null?void 0:r.map(t)}}),this.load()},this.resolveRedirect=t=>{const s=t;return s.href||(s.href=this.buildLocation(s).href),s},this.cleanCache=()=>{this.__store.setState(t=>({...t,cachedMatches:t.cachedMatches.filter(s=>{const r=this.looseRoutesById[s.routeId];if(!r.options.loader)return!1;const i=(s.preload?r.options.preloadGcTime??this.options.defaultPreloadGcTime:r.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return s.status!=="error"&&Date.now()-s.updatedAt<i})}))},this.preloadRoute=async t=>{const s=this.buildLocation(t);let r=this.matchRoutes(s.pathname,s.search,{throwOnError:!0,preload:!0});const i=Object.fromEntries([...this.state.matches,...this.state.pendingMatches??[],...this.state.cachedMatches].map(a=>[a.id,!0]));this.__store.batch(()=>{r.forEach(a=>{i[a.id]||this.__store.setState(u=>({...u,cachedMatches:[...u.cachedMatches,a]}))})});const o=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id));try{return r=await this.loadMatches({matches:r,location:s,preload:!0,updateMatch:(a,u)=>{o.has(a)?r=r.map(l=>l.id===a?u(l):l):this.updateMatch(a,u)}}),r}catch(a){if(Se(a))return await this.preloadRoute({...a,_fromLocation:s});console.error(a);return}},this.matchRoute=(t,s)=>{const r={...t,to:t.to?this.resolvePathWithBase(t.from||"",t.to):void 0,params:t.params||{},leaveParams:!0},i=this.buildLocation(r);if(s!=null&&s.pending&&this.state.status!=="pending")return!1;const a=((s==null?void 0:s.pending)===void 0?!this.state.isLoading:s.pending)?this.latestLocation:this.state.resolvedLocation,u=qe(this.basepath,a.pathname,{...s,to:i.pathname});return!u||t.params&&!_e(u,t.params,!0)?!1:u&&((s==null?void 0:s.includeSearch)??!0)?_e(a.search,i.search,!0)?u:!1:u},this.dehydrate=()=>{var t;const s=((t=this.options.errorSerializer)==null?void 0:t.serialize)??Tr;return{state:{dehydratedMatches:this.state.matches.map(r=>({...Ne(r,["id","status","updatedAt"]),error:r.error?{data:s(r.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var t,s,r;let i;typeof document<"u"&&(i=this.options.transformer.parse((t=window.__TSR__)==null?void 0:t.dehydrated)),Y(i),this.dehydratedData=i.payload,(r=(s=this.options).hydrate)==null||r.call(s,i.payload);const o=i.router.state,a=this.matchRoutes(this.state.location.pathname,this.state.location.search).map(u=>{const l=o.dehydratedMatches.find(d=>d.id===u.id);return Y(l,`Could not find a client-side match for dehydrated match with id: ${u.id}!`),{...u,...l}});this.__store.setState(u=>({...u,matches:a})),this.manifest=i.router.manifest},this.injectedHtml=[],this.injectHtml=t=>{const s=()=>(this.injectedHtml=this.injectedHtml.filter(r=>r!==s),t);this.injectedHtml.push(s)},this.streamedKeys=new Set,this.getStreamedValue=t=>{var s;if(this.isServer)return;const r=(s=window.__TSR__)==null?void 0:s.streamedValues[t];if(r)return r.parsed||(r.parsed=this.options.transformer.parse(r.value)),r.parsed},this.streamValue=(t,s)=>{var r;this.streamedKeys.has(t),this.streamedKeys.add(t);const i=`__TSR__.streamedValues['${t}'] = { value: ${(r=this.serializer)==null?void 0:r.call(this,this.options.transformer.stringify(s))}}`;this.injectHtml(`<script class='tsr-once'>${i}; __TSR__.cleanScripts()<\/script>`)},this._handleNotFound=(t,s,{updateMatch:r=this.updateMatch}={})=>{const i=Object.fromEntries(t.map(u=>[u.routeId,u]));let o=(s.global?this.looseRoutesById[J]:this.looseRoutesById[s.routeId])||this.looseRoutesById[J];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==J;)o=o.parentRoute,Y(o);const a=i[o.id];Y(a,"Could not find match for route: "+o.id),r(a.id,u=>({...u,status:"notFound",error:s,isFetching:!1})),s.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(s.routeId=o.parentRoute.id,this._handleNotFound(t,s,{updateMatch:r}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(t=>t.status==="notFound"||t.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,stringifySearch:e.stringifySearch??pr,parseSearch:e.parseSearch??fr}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}}class _r extends Error{}class Ir extends Error{}function Or(n){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...n},location:n,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Tr(n){return n instanceof Error?{name:n.name,message:n.message}:{data:n}}function ss(n){return!(typeof n=="object"&&n&&"data"in n)||!("__isServerError"in n&&n.__isServerError)||!(typeof n.data=="object"&&n.data)?!1:n.__isServerError===!0}function ns(n){if("name"in n&&"message"in n){const e=new Error(n.message);return e.name=n.name,e}return n.data}const ut=C.createContext(void 0);function Le(n){const e=C.useContext(ut);return q({select:s=>{const r=s.matches.find(i=>n.from?n.from===i.routeId:i.id===e);if(Y(!((n.shouldThrow??!0)&&!r),`Could not find ${n.from?`an active match from "${n.from}"`:"a nearest match!"}`),r!==void 0)return n.select?n.select(r):r}})}function Mr(n){return Le({...n,select:e=>typeof n.select=="function"?n.select(e.loaderDeps):e.loaderDeps})}function kr(n){return Le({...n,select:e=>typeof n.select=="function"?n.select(e.loaderData):e.loaderData})}function Lr(n){return Le({...n,select:e=>n.select?n.select(e.params):e.params})}function Dr(n){return Le({...n,select:e=>n.select?n.select(e.search):e.search})}function Ar(n){const e=ge();return C.useCallback(t=>e.navigate({...t}),[e])}let Ns=class{constructor(e){this.init=t=>{var s,r;this.originalIndex=t.originalIndex;const i=this.options,o=!(i!=null&&i.path)&&!(i!=null&&i.id);this.parentRoute=(r=(s=this.options)==null?void 0:s.getParentRoute)==null?void 0:r.call(s),o?this.path=J:Y(this.parentRoute);let a=o?J:i.path;a&&a!=="/"&&(a=Nt(a));const u=(i==null?void 0:i.id)||a;let l=o?J:me([this.parentRoute.id===J?"":this.parentRoute.id,u]);a===J&&(a="/"),l!==J&&(l=me(["/",l]));const d=l===J?"/":me([this.parentRoute.fullPath,a]);this.path=a,this.id=l,this.fullPath=d,this.to=d},this.updateLoader=t=>(Object.assign(this.options,t),this),this.update=t=>(Object.assign(this.options,t),this),this.lazy=t=>(this.lazyFn=t,this),this.useMatch=t=>Le({...t,from:this.id}),this.useRouteContext=t=>Le({...t,from:this.id,select:s=>t!=null&&t.select?t.select(s.context):s.context}),this.useSearch=t=>Dr({...t,from:this.id}),this.useParams=t=>Lr({...t,from:this.id}),this.useLoaderDeps=t=>Mr({...t,from:this.id}),this.useLoaderData=t=>kr({...t,from:this.id}),this.useNavigate=()=>Ar({from:this.id}),this.options=e||{},this.isRoot=!(e!=null&&e.getParentRoute),Y(!(e!=null&&e.id&&(e!=null&&e.path))),this.$$typeof=Symbol.for("react.memo")}addChildren(e){return this.children=Array.isArray(e)?e:Object.values(e),this}};function Fr(n){return new Ns(n)}class Nr extends Ns{constructor(e){super(e)}addChildren(e){return super.addChildren(e)}}function $r(n){return new Nr(n)}function Vt(n){return new Vr(n,{silent:!0}).createRoute}class Vr{constructor(e,t){this.path=e,this.createRoute=s=>{this.silent;const r=Fr(s);return r.isRoot=!1,r},this.silent=t==null?void 0:t.silent}}const Br="Error preloading route! ☝️";function Ur(n){const e=ge(),[t,s]=C.useState(!1),{activeProps:r=()=>({className:"active"}),inactiveProps:i=()=>({}),activeOptions:o,hash:a,search:u,params:l,to:d,state:h,mask:p,preload:f,preloadDelay:m,replace:g,startTransition:y,resetScroll:v,viewTransition:w,children:b,target:S,disabled:R,style:E,className:j,onClick:x,onFocus:_,onMouseEnter:L,onMouseLeave:T,onTouchStart:M,ignoreBlocker:k,...O}=n;let A="internal";try{new URL(`${d}`),A="external"}catch{}const U=e.buildLocation(n),ie=f??e.options.defaultPreload,F=m??e.options.defaultPreloadDelay??0,N=q({select:V=>{const D=Xe(V.location.pathname,e.basepath).split("/"),ft=Xe(U.pathname,e.basepath).split("/").every((Sn,xn)=>Sn===D[xn]),yn=o!=null&&o.exact?br(V.location.pathname,U.pathname,e.basepath):ft,vn=o!=null&&o.includeHash?V.location.hash===U.hash:!0,bn=(o==null?void 0:o.includeSearch)??!0?_e(V.location.search,U.search,!(o!=null&&o.exact)):!0;return yn&&vn&&bn}});if(A==="external")return{...O,type:A,href:d,...b&&{children:b},...S&&{target:S},...R&&{disabled:R},...E&&{style:E},...j&&{className:j},...x&&{onClick:x},..._&&{onFocus:_},...L&&{onMouseEnter:L},...T&&{onMouseLeave:T},...M&&{onTouchStart:M}};const K=V=>{if(!R&&!zr(V)&&!V.defaultPrevented&&(!S||S==="_self")&&V.button===0){V.preventDefault(),ws.flushSync(()=>{s(!0)});const D=e.subscribe("onResolved",()=>{D(),s(!1)});e.commitLocation({...U,replace:g,resetScroll:v,startTransition:y,viewTransition:w,ignoreBlocker:k})}},W=()=>{e.preloadRoute(n).catch(V=>{console.warn(V),console.warn(Br)})},Z=V=>{R||ie&&W()},$=Z,ee=V=>{if(R)return;const D=V.target||{};if(ie){if(D.preloadTimeout)return;D.preloadTimeout=setTimeout(()=>{D.preloadTimeout=null,W()},F)}},ze=V=>{if(R)return;const D=V.target||{};D.preloadTimeout&&(clearTimeout(D.preloadTimeout),D.preloadTimeout=null)},he=V=>D=>{var be;(be=D.persist)==null||be.call(D),V.filter(Boolean).forEach(ft=>{D.defaultPrevented||ft(D)})},fe=N?Re(r,{})??{}:{},te=N?{}:Re(i,{}),se=[j,fe.className,te.className].filter(Boolean).join(" "),le={...E,...fe.style,...te.style};return{...fe,...te,...O,href:R?void 0:U.maskedLocation?e.history.createHref(U.maskedLocation.href):e.history.createHref(U.href),onClick:he([x,K]),onFocus:he([_,Z]),onMouseEnter:he([L,ee]),onMouseLeave:he([T,ze]),onTouchStart:he([M,$]),disabled:!!R,target:S,...Object.keys(le).length&&{style:le},...se&&{className:se},...R&&{role:"link","aria-disabled":!0},...N&&{"data-status":"active","aria-current":"page"},...t&&{"data-transitioning":"transitioning"}}}const et=C.forwardRef((n,e)=>{const{_asChild:t,...s}=n,{type:r,...i}=Ur(s),o=typeof s.children=="function"?s.children({isActive:i["data-status"]==="active"}):s.children;return typeof t>"u"&&delete i.disabled,C.createElement(t||"a",{...i,ref:e},o)});function zr(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function qr(){const n=ge(),e=C.useRef({router:n,mounted:!1}),t=q({select:l=>Ne(l,["isLoading","location","resolvedLocation","isTransitioning"])}),[s,r]=C.useTransition(),i=q({select:l=>l.matches.some(d=>d.status==="pending")}),o=es(t.isLoading),a=t.isLoading||s||i,u=es(a);return n.isServer||(n.startReactTransition=r),C.useEffect(()=>{const l=n.history.subscribe(n.load),d=n.buildLocation({to:n.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0});return je(n.latestLocation.href)!==je(d.href)&&n.commitLocation({...d,replace:!0}),()=>{l()}},[n,n.history]),vt(()=>{var l;if((l=window.__TSR__)!=null&&l.dehydrated||e.current.router===n&&e.current.mounted)return;e.current={router:n,mounted:!0},(async()=>{try{await n.load()}catch(h){console.error(h)}})()},[n]),vt(()=>{if(o&&!t.isLoading){const l=n.state.location,d=n.state.resolvedLocation,h=d.href!==l.href;n.emit({type:"onLoad",fromLocation:d,toLocation:l,pathChanged:h})}},[o,n,t.isLoading]),vt(()=>{if(u&&!a){const l=n.state.location,d=n.state.resolvedLocation,h=d.href!==l.href;if(n.emit({type:"onResolved",fromLocation:d,toLocation:l,pathChanged:h}),n.__store.setState(p=>({...p,status:"idle",resolvedLocation:p.location})),document.querySelector&&n.state.location.hash!==""){const p=document.getElementById(n.state.location.hash);p&&p.scrollIntoView()}}},[a,u,n]),null}function Ge(n){return c.jsx(c.Fragment,{children:n.children})}function $s(n,e,t){return e.options.notFoundComponent?c.jsx(e.options.notFoundComponent,{data:t}):n.options.defaultNotFoundComponent?c.jsx(n.options.defaultNotFoundComponent,{data:t}):c.jsx(Cr,{})}function Vs({matchId:n}){var e,t;const s=ge(),r=q({select:g=>{var y;return(y=g.matches.find(v=>v.id===n))==null?void 0:y.routeId}});Y(r);const i=s.routesById[r],o=i.options.pendingComponent??s.options.defaultPendingComponent,a=o?c.jsx(o,{}):null,u=i.options.errorComponent??s.options.defaultErrorComponent,l=i.options.onCatch??s.options.defaultOnCatch,d=i.isRoot?i.options.notFoundComponent??((e=s.options.notFoundRoute)==null?void 0:e.options.component):i.options.notFoundComponent,h=(!i.isRoot||i.options.wrapInSuspense)&&(i.options.wrapInSuspense??o??((t=i.options.errorComponent)==null?void 0:t.preload))?C.Suspense:Ge,p=u?$t:Ge,f=d?jr:Ge,m=q({select:g=>g.loadedAt});return c.jsx(ut.Provider,{value:n,children:c.jsx(h,{fallback:a,children:c.jsx(p,{getResetKey:()=>m,errorComponent:u||lt,onCatch:(g,y)=>{if(ae(g))throw g;l==null||l(g,y)},children:c.jsx(f,{fallback:g=>{if(!d||g.routeId&&g.routeId!==r||!g.routeId&&!i.isRoot)throw g;return C.createElement(d,g)},children:c.jsx(Kr,{matchId:n})})})})})}function Kr({matchId:n}){var e,t;const s=ge(),r=q({select:h=>{var p;return(p=h.matches.find(f=>f.id===n))==null?void 0:p.routeId}}),i=s.routesById[r],o=q({select:h=>h.matches.findIndex(p=>p.id===n)}),a=q({select:h=>{const p=h.matches[o];return Ne(p,["id","status","error","loadPromise","minPendingPromise"])}}),u=(i.options.errorComponent??s.options.defaultErrorComponent)||lt;if(a.status==="notFound"){let h;return ss(a.error)?h=(((e=s.options.errorSerializer)==null?void 0:e.deserialize)??ns)(a.error.data):h=a.error,Y(ae(h)),$s(s,i,h)}if(a.status==="redirected")throw Y(Se(a.error)),a.loadPromise;if(a.status==="error"){if(s.isServer)return c.jsx(u,{error:a.error,info:{componentStack:""}});throw ss(a.error)?(((t=s.options.errorSerializer)==null?void 0:t.deserialize)??ns)(a.error.data):a.error}if(a.status==="pending"){const h=i.options.pendingMinMs??s.options.defaultPendingMinMs;if(h&&!a.minPendingPromise&&!s.isServer){const p=Ee();Promise.resolve().then(()=>{s.updateMatch(a.id,f=>({...f,minPendingPromise:p}))}),setTimeout(()=>{p.resolve(),s.updateMatch(a.id,f=>({...f,minPendingPromise:void 0}))},h)}throw a.loadPromise}const l=i.options.component??s.options.defaultComponent,d=l?c.jsx(l,{}):c.jsx(Bs,{});return c.jsxs(c.Fragment,{children:[d,s.AfterEachMatch?c.jsx(s.AfterEachMatch,{match:a,matchIndex:o}):null]})}const Bs=C.memo(function(){const e=ge(),t=C.useContext(ut),s=q({select:l=>{var d;return(d=l.matches.find(h=>h.id===t))==null?void 0:d.routeId}}),r=e.routesById[s],{parentGlobalNotFound:i}=q({select:l=>{const h=l.matches.find(p=>p.id===t);return Y(h),{parentGlobalNotFound:h.globalNotFound}}}),o=q({select:l=>{var d;const h=l.matches,p=h.findIndex(f=>f.id===t);return(d=h[p+1])==null?void 0:d.id}});if(i)return $s(e,r,void 0);if(!o)return null;const a=c.jsx(Vs,{matchId:o}),u=e.options.defaultPendingComponent?c.jsx(e.options.defaultPendingComponent,{}):null;return t===J?c.jsx(C.Suspense,{fallback:u,children:a}):a});function Wr(){const n=ge(),e=n.options.defaultPendingComponent?c.jsx(n.options.defaultPendingComponent,{}):null,t=n.state.matches.length?Ge:C.Suspense,s=c.jsxs(t,{fallback:e,children:[c.jsx(qr,{}),c.jsx(Hr,{})]});return n.options.InnerWrap?c.jsx(n.options.InnerWrap,{children:s}):s}function Hr(){const n=q({select:t=>{var s;return(s=t.matches[0])==null?void 0:s.id}}),e=q({select:t=>t.loadedAt});return c.jsx(ut.Provider,{value:n,children:c.jsx($t,{getResetKey:()=>e,errorComponent:lt,onCatch:t=>{t.message||t.toString()},children:n?c.jsx(Vs,{matchId:n}):null})})}function Yr({router:n,children:e,...t}){n.update({...n.options,...t,context:{...n.options.context,...t.context}});const s=ks(),r=c.jsx(s.Provider,{value:n,children:e});return n.options.Wrap?c.jsx(n.options.Wrap,{children:r}):r}function Gr({router:n,...e}){return c.jsx(Yr,{router:n,...e,children:c.jsx(Wr,{})})}var Jr={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const rs=n=>{let e;const t=new Set,s=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const f=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(m=>m(e,f))}},r=()=>e,u={setState:s,getState:r,getInitialState:()=>l,subscribe:d=>(t.add(d),()=>t.delete(d)),destroy:()=>{(Jr?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},l=e=n(s,r,u);return u},Qr=n=>n?rs(n):rs;var Us={exports:{}},zs={},qs={exports:{}},Ks={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var De=C;function Xr(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Zr=typeof Object.is=="function"?Object.is:Xr,ei=De.useState,ti=De.useEffect,si=De.useLayoutEffect,ni=De.useDebugValue;function ri(n,e){var t=e(),s=ei({inst:{value:t,getSnapshot:e}}),r=s[0].inst,i=s[1];return si(function(){r.value=t,r.getSnapshot=e,St(r)&&i({inst:r})},[n,t,e]),ti(function(){return St(r)&&i({inst:r}),n(function(){St(r)&&i({inst:r})})},[n]),ni(t),t}function St(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Zr(n,t)}catch{return!0}}function ii(n,e){return e()}var oi=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ii:ri;Ks.useSyncExternalStore=De.useSyncExternalStore!==void 0?De.useSyncExternalStore:oi;qs.exports=Ks;var ai=qs.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dt=C,ci=ai;function li(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ui=typeof Object.is=="function"?Object.is:li,di=ci.useSyncExternalStore,hi=dt.useRef,fi=dt.useEffect,pi=dt.useMemo,mi=dt.useDebugValue;zs.useSyncExternalStoreWithSelector=function(n,e,t,s,r){var i=hi(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=pi(function(){function u(f){if(!l){if(l=!0,d=f,f=s(f),r!==void 0&&o.hasValue){var m=o.value;if(r(m,f))return h=m}return h=f}if(m=h,ui(d,f))return m;var g=s(f);return r!==void 0&&r(m,g)?m:(d=f,h=g)}var l=!1,d,h,p=t===void 0?null:t;return[function(){return u(e())},p===null?void 0:function(){return u(p())}]},[e,t,s,r]);var a=di(n,i[0],i[1]);return fi(function(){o.hasValue=!0,o.value=a},[a]),mi(a),a};Us.exports=zs;var gi=Us.exports;const yi=wn(gi);var Ws={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:vi}=js,{useSyncExternalStoreWithSelector:bi}=yi;let is=!1;const Si=n=>n;function xi(n,e=Si,t){(Ws?"production":void 0)!=="production"&&t&&!is&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),is=!0);const s=bi(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return vi(s),s}const os=n=>{(Ws?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?Qr(n):n,t=(s,r)=>xi(e,s,r);return Object.assign(t,e),t},B=n=>n?os(n):os;function ue(n){return Array.isArray?Array.isArray(n):Gs(n)==="[object Array]"}const wi=1/0;function ji(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-wi?"-0":e}function Ci(n){return n==null?"":ji(n)}function ce(n){return typeof n=="string"}function Hs(n){return typeof n=="number"}function Pi(n){return n===!0||n===!1||Ei(n)&&Gs(n)=="[object Boolean]"}function Ys(n){return typeof n=="object"}function Ei(n){return Ys(n)&&n!==null}function Q(n){return n!=null}function xt(n){return!n.trim().length}function Gs(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Ri="Incorrect 'index' type",_i=n=>`Invalid value for key ${n}`,Ii=n=>`Pattern length exceeds max of ${n}.`,Oi=n=>`Missing ${n} property in key`,Ti=n=>`Property 'weight' in key '${n}' must be a positive integer`,as=Object.prototype.hasOwnProperty;class Mi{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(s=>{let r=Js(s);this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight}),this._keys.forEach(s=>{s.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Js(n){let e=null,t=null,s=null,r=1,i=null;if(ce(n)||ue(n))s=n,e=cs(n),t=It(n);else{if(!as.call(n,"name"))throw new Error(Oi("name"));const o=n.name;if(s=o,as.call(n,"weight")&&(r=n.weight,r<=0))throw new Error(Ti(o));e=cs(o),t=It(o),i=n.getFn}return{path:e,id:t,weight:r,src:s,getFn:i}}function cs(n){return ue(n)?n:n.split(".")}function It(n){return ue(n)?n.join("."):n}function ki(n,e){let t=[],s=!1;const r=(i,o,a)=>{if(Q(i))if(!o[a])t.push(i);else{let u=o[a];const l=i[u];if(!Q(l))return;if(a===o.length-1&&(ce(l)||Hs(l)||Pi(l)))t.push(Ci(l));else if(ue(l)){s=!0;for(let d=0,h=l.length;d<h;d+=1)r(l[d],o,a+1)}else o.length&&r(l,o,a+1)}};return r(n,ce(e)?e.split("."):e,0),s?t:t[0]}const Li={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Di={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},Ai={location:0,threshold:.6,distance:100},Fi={useExtendedSearch:!1,getFn:ki,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var P={...Di,...Li,...Ai,...Fi};const Ni=/[^ ]+/g;function $i(n=1,e=3){const t=new Map,s=Math.pow(10,e);return{get(r){const i=r.match(Ni).length;if(t.has(i))return t.get(i);const o=1/Math.pow(i,.5*n),a=parseFloat(Math.round(o*s)/s);return t.set(i,a),a},clear(){t.clear()}}}class Bt{constructor({getFn:e=P.getFn,fieldNormWeight:t=P.fieldNormWeight}={}){this.norm=$i(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,s)=>{this._keysMap[t.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ce(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();ce(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,s=this.size();t<s;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Q(e)||xt(e))return;let s={v:e,i:t,n:this.norm.get(e)};this.records.push(s)}_addObject(e,t){let s={i:t,$:{}};this.keys.forEach((r,i)=>{let o=r.getFn?r.getFn(e):this.getFn(e,r.path);if(Q(o)){if(ue(o)){let a=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:l,value:d}=u.pop();if(Q(d))if(ce(d)&&!xt(d)){let h={v:d,i:l,n:this.norm.get(d)};a.push(h)}else ue(d)&&d.forEach((h,p)=>{u.push({nestedArrIndex:p,value:h})})}s.$[i]=a}else if(ce(o)&&!xt(o)){let a={v:o,n:this.norm.get(o)};s.$[i]=a}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function Qs(n,e,{getFn:t=P.getFn,fieldNormWeight:s=P.fieldNormWeight}={}){const r=new Bt({getFn:t,fieldNormWeight:s});return r.setKeys(n.map(Js)),r.setSources(e),r.create(),r}function Vi(n,{getFn:e=P.getFn,fieldNormWeight:t=P.fieldNormWeight}={}){const{keys:s,records:r}=n,i=new Bt({getFn:e,fieldNormWeight:t});return i.setKeys(s),i.setIndexRecords(r),i}function Ke(n,{errors:e=0,currentLocation:t=0,expectedLocation:s=0,distance:r=P.distance,ignoreLocation:i=P.ignoreLocation}={}){const o=e/n.length;if(i)return o;const a=Math.abs(s-t);return r?o+a/r:a?1:o}function Bi(n=[],e=P.minMatchCharLength){let t=[],s=-1,r=-1,i=0;for(let o=n.length;i<o;i+=1){let a=n[i];a&&s===-1?s=i:!a&&s!==-1&&(r=i-1,r-s+1>=e&&t.push([s,r]),s=-1)}return n[i-1]&&i-s>=e&&t.push([s,i-1]),t}const we=32;function Ui(n,e,t,{location:s=P.location,distance:r=P.distance,threshold:i=P.threshold,findAllMatches:o=P.findAllMatches,minMatchCharLength:a=P.minMatchCharLength,includeMatches:u=P.includeMatches,ignoreLocation:l=P.ignoreLocation}={}){if(e.length>we)throw new Error(Ii(we));const d=e.length,h=n.length,p=Math.max(0,Math.min(s,h));let f=i,m=p;const g=a>1||u,y=g?Array(h):[];let v;for(;(v=n.indexOf(e,m))>-1;){let j=Ke(e,{currentLocation:v,expectedLocation:p,distance:r,ignoreLocation:l});if(f=Math.min(j,f),m=v+d,g){let x=0;for(;x<d;)y[v+x]=1,x+=1}}m=-1;let w=[],b=1,S=d+h;const R=1<<d-1;for(let j=0;j<d;j+=1){let x=0,_=S;for(;x<_;)Ke(e,{errors:j,currentLocation:p+_,expectedLocation:p,distance:r,ignoreLocation:l})<=f?x=_:S=_,_=Math.floor((S-x)/2+x);S=_;let L=Math.max(1,p-_+1),T=o?h:Math.min(p+_,h)+d,M=Array(T+2);M[T+1]=(1<<j)-1;for(let O=T;O>=L;O-=1){let A=O-1,U=t[n.charAt(A)];if(g&&(y[A]=+!!U),M[O]=(M[O+1]<<1|1)&U,j&&(M[O]|=(w[O+1]|w[O])<<1|1|w[O+1]),M[O]&R&&(b=Ke(e,{errors:j,currentLocation:A,expectedLocation:p,distance:r,ignoreLocation:l}),b<=f)){if(f=b,m=A,m<=p)break;L=Math.max(1,2*p-m)}}if(Ke(e,{errors:j+1,currentLocation:p,expectedLocation:p,distance:r,ignoreLocation:l})>f)break;w=M}const E={isMatch:m>=0,score:Math.max(.001,b)};if(g){const j=Bi(y,a);j.length?u&&(E.indices=j):E.isMatch=!1}return E}function zi(n){let e={};for(let t=0,s=n.length;t<s;t+=1){const r=n.charAt(t);e[r]=(e[r]||0)|1<<s-t-1}return e}class Xs{constructor(e,{location:t=P.location,threshold:s=P.threshold,distance:r=P.distance,includeMatches:i=P.includeMatches,findAllMatches:o=P.findAllMatches,minMatchCharLength:a=P.minMatchCharLength,isCaseSensitive:u=P.isCaseSensitive,ignoreLocation:l=P.ignoreLocation}={}){if(this.options={location:t,threshold:s,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:l},this.pattern=u?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(p,f)=>{this.chunks.push({pattern:p,alphabet:zi(p),startIndex:f})},h=this.pattern.length;if(h>we){let p=0;const f=h%we,m=h-f;for(;p<m;)d(this.pattern.substr(p,we),p),p+=we;if(f){const g=h-we;d(this.pattern.substr(g),g)}}else d(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:s}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let m={isMatch:!0,score:0};return s&&(m.indices=[[0,e.length-1]]),m}const{location:r,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:u,ignoreLocation:l}=this.options;let d=[],h=0,p=!1;this.chunks.forEach(({pattern:m,alphabet:g,startIndex:y})=>{const{isMatch:v,score:w,indices:b}=Ui(e,m,g,{location:r+y,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:u,includeMatches:s,ignoreLocation:l});v&&(p=!0),h+=w,v&&b&&(d=[...d,...b])});let f={isMatch:p,score:p?h/this.chunks.length:1};return p&&s&&(f.indices=d),f}}class ye{constructor(e){this.pattern=e}static isMultiMatch(e){return ls(e,this.multiRegex)}static isSingleMatch(e){return ls(e,this.singleRegex)}search(){}}function ls(n,e){const t=n.match(e);return t?t[1]:null}class qi extends ye{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Ki extends ye{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Wi extends ye{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Hi extends ye{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Yi extends ye{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Gi extends ye{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Zs extends ye{constructor(e,{location:t=P.location,threshold:s=P.threshold,distance:r=P.distance,includeMatches:i=P.includeMatches,findAllMatches:o=P.findAllMatches,minMatchCharLength:a=P.minMatchCharLength,isCaseSensitive:u=P.isCaseSensitive,ignoreLocation:l=P.ignoreLocation}={}){super(e),this._bitapSearch=new Xs(e,{location:t,threshold:s,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class en extends ye{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,s;const r=[],i=this.pattern.length;for(;(s=e.indexOf(this.pattern,t))>-1;)t=s+i,r.push([s,t-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const Ot=[qi,en,Wi,Hi,Gi,Yi,Ki,Zs],us=Ot.length,Ji=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Qi="|";function Xi(n,e={}){return n.split(Qi).map(t=>{let s=t.trim().split(Ji).filter(i=>i&&!!i.trim()),r=[];for(let i=0,o=s.length;i<o;i+=1){const a=s[i];let u=!1,l=-1;for(;!u&&++l<us;){const d=Ot[l];let h=d.isMultiMatch(a);h&&(r.push(new d(h,e)),u=!0)}if(!u)for(l=-1;++l<us;){const d=Ot[l];let h=d.isSingleMatch(a);if(h){r.push(new d(h,e));break}}}return r})}const Zi=new Set([Zs.type,en.type]);class eo{constructor(e,{isCaseSensitive:t=P.isCaseSensitive,includeMatches:s=P.includeMatches,minMatchCharLength:r=P.minMatchCharLength,ignoreLocation:i=P.ignoreLocation,findAllMatches:o=P.findAllMatches,location:a=P.location,threshold:u=P.threshold,distance:l=P.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:s,minMatchCharLength:r,findAllMatches:o,ignoreLocation:i,location:a,threshold:u,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=Xi(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let i=0,o=[],a=0;for(let u=0,l=t.length;u<l;u+=1){const d=t[u];o.length=0,i=0;for(let h=0,p=d.length;h<p;h+=1){const f=d[h],{isMatch:m,indices:g,score:y}=f.search(e);if(m){if(i+=1,a+=y,s){const v=f.constructor.type;Zi.has(v)?o=[...o,...g]:o.push(g)}}else{a=0,i=0,o.length=0;break}}if(i){let h={isMatch:!0,score:a/i};return s&&(h.indices=o),h}}return{isMatch:!1,score:1}}}const Tt=[];function to(...n){Tt.push(...n)}function Mt(n,e){for(let t=0,s=Tt.length;t<s;t+=1){let r=Tt[t];if(r.condition(n,e))return new r(n,e)}return new Xs(n,e)}const tt={AND:"$and",OR:"$or"},kt={PATH:"$path",PATTERN:"$val"},Lt=n=>!!(n[tt.AND]||n[tt.OR]),so=n=>!!n[kt.PATH],no=n=>!ue(n)&&Ys(n)&&!Lt(n),ds=n=>({[tt.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function tn(n,e,{auto:t=!0}={}){const s=r=>{let i=Object.keys(r);const o=so(r);if(!o&&i.length>1&&!Lt(r))return s(ds(r));if(no(r)){const u=o?r[kt.PATH]:i[0],l=o?r[kt.PATTERN]:r[u];if(!ce(l))throw new Error(_i(u));const d={keyId:It(u),pattern:l};return t&&(d.searcher=Mt(l,e)),d}let a={children:[],operator:i[0]};return i.forEach(u=>{const l=r[u];ue(l)&&l.forEach(d=>{a.children.push(s(d))})}),a};return Lt(n)||(n=ds(n)),s(n)}function ro(n,{ignoreFieldNorm:e=P.ignoreFieldNorm}){n.forEach(t=>{let s=1;t.matches.forEach(({key:r,norm:i,score:o})=>{const a=r?r.weight:null;s*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:i))}),t.score=s})}function io(n,e){const t=n.matches;e.matches=[],Q(t)&&t.forEach(s=>{if(!Q(s.indices)||!s.indices.length)return;const{indices:r,value:i}=s;let o={indices:r,value:i};s.key&&(o.key=s.key.src),s.idx>-1&&(o.refIndex=s.idx),e.matches.push(o)})}function oo(n,e){e.score=n.score}function ao(n,e,{includeMatches:t=P.includeMatches,includeScore:s=P.includeScore}={}){const r=[];return t&&r.push(io),s&&r.push(oo),n.map(i=>{const{idx:o}=i,a={item:e[o],refIndex:o};return r.length&&r.forEach(u=>{u(i,a)}),a})}class ve{constructor(e,t={},s){this.options={...P,...t},this.options.useExtendedSearch,this._keyStore=new Mi(this.options.keys),this.setCollection(e,s)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Bt))throw new Error(Ri);this._myIndex=t||Qs(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Q(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let s=0,r=this._docs.length;s<r;s+=1){const i=this._docs[s];e(i,s)&&(this.removeAt(s),s-=1,r-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:s,includeScore:r,shouldSort:i,sortFn:o,ignoreFieldNorm:a}=this.options;let u=ce(e)?ce(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return ro(u,{ignoreFieldNorm:a}),i&&u.sort(o),Hs(t)&&t>-1&&(u=u.slice(0,t)),ao(u,this._docs,{includeMatches:s,includeScore:r})}_searchStringList(e){const t=Mt(e,this.options),{records:s}=this._myIndex,r=[];return s.forEach(({v:i,i:o,n:a})=>{if(!Q(i))return;const{isMatch:u,score:l,indices:d}=t.searchIn(i);u&&r.push({item:i,idx:o,matches:[{score:l,value:i,norm:a,indices:d}]})}),r}_searchLogical(e){const t=tn(e,this.options),s=(a,u,l)=>{if(!a.children){const{keyId:h,searcher:p}=a,f=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(u,h),searcher:p});return f&&f.length?[{idx:l,item:u,matches:f}]:[]}const d=[];for(let h=0,p=a.children.length;h<p;h+=1){const f=a.children[h],m=s(f,u,l);if(m.length)d.push(...m);else if(a.operator===tt.AND)return[]}return d},r=this._myIndex.records,i={},o=[];return r.forEach(({$:a,i:u})=>{if(Q(a)){let l=s(t,a,u);l.length&&(i[u]||(i[u]={idx:u,item:a,matches:[]},o.push(i[u])),l.forEach(({matches:d})=>{i[u].matches.push(...d)}))}}),o}_searchObjectList(e){const t=Mt(e,this.options),{keys:s,records:r}=this._myIndex,i=[];return r.forEach(({$:o,i:a})=>{if(!Q(o))return;let u=[];s.forEach((l,d)=>{u.push(...this._findMatches({key:l,value:o[d],searcher:t}))}),u.length&&i.push({idx:a,item:o,matches:u})}),i}_findMatches({key:e,value:t,searcher:s}){if(!Q(t))return[];let r=[];if(ue(t))t.forEach(({v:i,i:o,n:a})=>{if(!Q(i))return;const{isMatch:u,score:l,indices:d}=s.searchIn(i);u&&r.push({score:l,key:e,value:i,idx:o,norm:a,indices:d})});else{const{v:i,n:o}=t,{isMatch:a,score:u,indices:l}=s.searchIn(i);a&&r.push({score:u,key:e,value:i,norm:o,indices:l})}return r}}ve.version="7.0.0";ve.createIndex=Qs;ve.parseIndex=Vi;ve.config=P;ve.parseQuery=tn;to(eo);function Ut(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function co(n,e){const t=indexedDB.open(n);t.onupgradeneeded=()=>t.result.createObjectStore(e);const s=Ut(t);return(r,i)=>s.then(o=>i(o.transaction(e,r).objectStore(e)))}let wt;function sn(){return wt||(wt=co("keyval-store","keyval")),wt}function zt(n,e=sn()){return e("readonly",t=>Ut(t.get(n)))}function qt(n,e,t=sn()){return t("readwrite",s=>(s.put(e,n),Ut(s.transaction)))}class X extends Error{constructor(e){var t,s,r,i;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,X.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof X||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(i=(r=(s=this.originalError)==null?void 0:s.cause)==null?void 0:r.message)!=null&&i.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const We=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function lo(n,e){const t={};if(typeof n!="string")return t;const s=Object.assign({},{}).decode||uo;let r=0;for(;r<n.length;){const i=n.indexOf("=",r);if(i===-1)break;let o=n.indexOf(";",r);if(o===-1)o=n.length;else if(o<i){r=n.lastIndexOf(";",i-1)+1;continue}const a=n.slice(r,i).trim();if(t[a]===void 0){let u=n.slice(i+1,o).trim();u.charCodeAt(0)===34&&(u=u.slice(1,-1));try{t[a]=s(u)}catch{t[a]=u}}r=o+1}return t}function hs(n,e,t){const s=Object.assign({},t||{}),r=s.encode||ho;if(!We.test(n))throw new TypeError("argument name is invalid");const i=r(e);if(i&&!We.test(i))throw new TypeError("argument val is invalid");let o=n+"="+i;if(s.maxAge!=null){const a=s.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(s.domain){if(!We.test(s.domain))throw new TypeError("option domain is invalid");o+="; Domain="+s.domain}if(s.path){if(!We.test(s.path))throw new TypeError("option path is invalid");o+="; Path="+s.path}if(s.expires){if(!function(u){return Object.prototype.toString.call(u)==="[object Date]"||u instanceof Date}(s.expires)||isNaN(s.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(o+="; HttpOnly"),s.secure&&(o+="; Secure"),s.priority)switch(typeof s.priority=="string"?s.priority.toLowerCase():s.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function uo(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function ho(n){return encodeURIComponent(n)}const fo=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal;let nn;function Ie(n){if(n)try{const e=decodeURIComponent(nn(n.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function rn(n,e=0){let t=Ie(n);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}nn=typeof atob!="function"||fo?n=>{let e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,s,r=0,i=0,o="";s=e.charAt(i++);~s&&(t=r%4?64*t+s:s,r++%4)?o+=String.fromCharCode(255&t>>(-2*r&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return o}:atob;const fs="pb_auth";class po{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!rn(this.token)}get isAdmin(){return Ie(this.token).type==="admin"}get isAuthRecord(){return Ie(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=fs){const s=lo(e||"")[t]||"";let r={};try{r=JSON.parse(s),(typeof r===null||typeof r!="object"||Array.isArray(r))&&(r={})}catch{}this.save(r.token||"",r.model||null)}exportToCookie(e,t=fs){var u,l;const s={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},r=Ie(this.token);s.expires=r!=null&&r.exp?new Date(1e3*r.exp):new Date("1970-01-01"),e=Object.assign({},s,e);const i={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let o=hs(t,JSON.stringify(i),e);const a=typeof Blob<"u"?new Blob([o]).size:o.length;if(i.model&&a>4096){i.model={id:(u=i==null?void 0:i.model)==null?void 0:u.id,email:(l=i==null?void 0:i.model)==null?void 0:l.email};const d=["collectionId","username","verified"];for(const h in this.model)d.includes(h)&&(i.model[h]=this.model[h]);o=hs(t,JSON.stringify(i),e)}return o}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let s=this._onChangeCallbacks.length-1;s>=0;s--)if(this._onChangeCallbacks[s]==e)return delete this._onChangeCallbacks[s],void this._onChangeCallbacks.splice(s,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class mo extends po{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let s=t;typeof t!="string"&&(s=JSON.stringify(t)),window.localStorage.setItem(e,s)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class Pe{constructor(e){this.client=e}}class go extends Pe{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}async testEmail(e,t,s){return s=Object.assign({method:"POST",body:{email:e,template:t}},s),this.client.send("/api/settings/test/email",s).then(()=>!0)}async generateAppleClientSecret(e,t,s,r,i,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:s,privateKey:r,duration:i}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}class Kt extends Pe{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let s=500;return(t=Object.assign({},e,t)).batch&&(s=t.batch,delete t.batch),this._getFullList(s,t)}async getList(e=1,t=30,s){return(s=Object.assign({method:"GET"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send(this.baseCrudPath,s).then(r=>{var i;return r.items=((i=r.items)==null?void 0:i.map(o=>this.decode(o)))||[],r})}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(s=>{var r;if(!((r=s==null?void 0:s.items)!=null&&r.length))throw new X({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return s.items[0]})}async getOne(e,t){if(!e)throw new X({url:this.client.buildUrl(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(s=>this.decode(s))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(s=>this.decode(s))}async update(e,t,s){return s=Object.assign({method:"PATCH",body:t},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),s).then(r=>this.decode(r))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let s=[],r=async i=>this.getList(i,e||500,t).then(o=>{const a=o.items;return s=s.concat(a),a.length==o.perPage?r(i+1):s});return r(1)}}function G(n,e,t,s){const r=s!==void 0;return r||t!==void 0?r?(console.warn(n),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,s),e):Object.assign(e,t):e}function jt(n){var e;(e=n._resetAutoRefresh)==null||e.call(n)}class yo extends Kt{get baseCrudPath(){return"/api/admins"}async update(e,t,s){return super.update(e,t,s).then(r=>{var i,o;return((i=this.client.authStore.model)==null?void 0:i.id)===r.id&&((o=this.client.authStore.model)==null?void 0:o.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,r),r})}async delete(e,t){return super.delete(e,t).then(s=>{var r,i;return s&&((r=this.client.authStore.model)==null?void 0:r.id)===e&&((i=this.client.authStore.model)==null?void 0:i.collectionId)===void 0&&this.client.authStore.clear(),s})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}async authWithPassword(e,t,s,r){let i={method:"POST",body:{identity:e,password:t}};i=G("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",i,s,r);const o=i.autoRefreshThreshold;delete i.autoRefreshThreshold,i.autoRefresh||jt(this.client);let a=await this.client.send(this.baseCrudPath+"/auth-with-password",i);return a=this.authResponse(a),o&&function(l,d,h,p){jt(l);const f=l.beforeSend,m=l.authStore.model,g=l.authStore.onChange((y,v)=>{(!y||(v==null?void 0:v.id)!=(m==null?void 0:m.id)||(v!=null&&v.collectionId||m!=null&&m.collectionId)&&(v==null?void 0:v.collectionId)!=(m==null?void 0:m.collectionId))&&jt(l)});l._resetAutoRefresh=function(){g(),l.beforeSend=f,delete l._resetAutoRefresh},l.beforeSend=async(y,v)=>{var R;const w=l.authStore.token;if((R=v.query)!=null&&R.autoRefresh)return f?f(y,v):{url:y,sendOptions:v};let b=l.authStore.isValid;if(b&&rn(l.authStore.token,d))try{await h()}catch{b=!1}b||await p();const S=v.headers||{};for(let E in S)if(E.toLowerCase()=="authorization"&&w==S[E]&&l.authStore.token){S[E]=l.authStore.token;break}return v.headers=S,f?f(y,v):{url:y,sendOptions:v}}}(this.client,o,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},i))),a}async authRefresh(e,t){let s={method:"POST"};return s=G("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",s,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",s).then(this.authResponse.bind(this))}async requestPasswordReset(e,t,s){let r={method:"POST",body:{email:e}};return r=G("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",r,t,s),this.client.send(this.baseCrudPath+"/request-password-reset",r).then(()=>!0)}async confirmPasswordReset(e,t,s,r,i){let o={method:"POST",body:{token:e,password:t,passwordConfirm:s}};return o=G("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",o,r,i),this.client.send(this.baseCrudPath+"/confirm-password-reset",o).then(()=>!0)}}const vo=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function on(n){if(n){n.query=n.query||{};for(let e in n)vo.includes(e)||(n.query[e]=n[e],delete n[e])}}class an extends Pe{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,s){var o;if(!e)throw new Error("topic must be set.");let r=e;if(s){on(s);const a="options="+encodeURIComponent(JSON.stringify({query:s.query,headers:s.headers}));r+=(r.includes("?")?"&":"?")+a}const i=function(a){const u=a;let l;try{l=JSON.parse(u==null?void 0:u.data)}catch{}t(l||{})};return this.subscriptions[r]||(this.subscriptions[r]=[]),this.subscriptions[r].push(i),this.isConnected?this.subscriptions[r].length===1?await this.submitSubscriptions():(o=this.eventSource)==null||o.addEventListener(r,i):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,i)}async unsubscribe(e){var s;let t=!1;if(e){const r=this.getSubscriptionsByTopic(e);for(let i in r)if(this.hasSubscriptionListeners(i)){for(let o of this.subscriptions[i])(s=this.eventSource)==null||s.removeEventListener(i,o);delete this.subscriptions[i],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){var s;let t=!1;for(let r in this.subscriptions)if((r+"?").startsWith(e)){t=!0;for(let i of this.subscriptions[r])(s=this.eventSource)==null||s.removeEventListener(r,i);delete this.subscriptions[r]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var i;let s=!1;const r=this.getSubscriptionsByTopic(e);for(let o in r){if(!Array.isArray(this.subscriptions[o])||!this.subscriptions[o].length)continue;let a=!1;for(let u=this.subscriptions[o].length-1;u>=0;u--)this.subscriptions[o][u]===t&&(a=!0,delete this.subscriptions[o][u],this.subscriptions[o].splice(u,1),(i=this.eventSource)==null||i.removeEventListener(o,t));a&&(this.subscriptions[o].length||delete this.subscriptions[o],s||this.hasSubscriptionListeners(o)||(s=!0))}this.hasSubscriptionListeners()?s&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){var t,s;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let r in this.subscriptions)if((s=this.subscriptions[r])!=null&&s.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let s in this.subscriptions)(s+"?").startsWith(e)&&(t[s]=this.subscriptions[s]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let s=3;for(;this.hasUnsentSubscriptions()&&s>0;)s--,await this.submitSubscriptions()}).then(()=>{for(let r of this.pendingConnects)r.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const s=this.getSubscriptionsByTopic("PB_CONNECT");for(let r in s)for(let i of s[r])i(e)}).catch(s=>{this.clientId="",this.connectErrorHandler(s)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let s of this.pendingConnects)s.reject(new X(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let s of this.pendingConnects)s.resolve();this.pendingConnects=[]}}}class bo extends Kt{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribe(e,t,s){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,s)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const s=Object.assign({},e,t);return super.getFullList(s)}async getList(e=1,t=30,s){return super.getList(e,t,s)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,s){return super.update(e,t,s).then(r=>{var i,o,a;return((i=this.client.authStore.model)==null?void 0:i.id)!==(r==null?void 0:r.id)||((o=this.client.authStore.model)==null?void 0:o.collectionId)!==this.collectionIdOrName&&((a=this.client.authStore.model)==null?void 0:a.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,r),r})}async delete(e,t){return super.delete(e,t).then(s=>{var r,i,o;return!s||((r=this.client.authStore.model)==null?void 0:r.id)!==e||((i=this.client.authStore.model)==null?void 0:i.collectionId)!==this.collectionIdOrName&&((o=this.client.authStore.model)==null?void 0:o.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),s})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}async authWithPassword(e,t,s,r){let i={method:"POST",body:{identity:e,password:t}};return i=G("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",i,s,r),this.client.send(this.baseCollectionPath+"/auth-with-password",i).then(o=>this.authResponse(o))}async authWithOAuth2Code(e,t,s,r,i,o,a){let u={method:"POST",body:{provider:e,code:t,codeVerifier:s,redirectUrl:r,createData:i}};return u=G("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",u,o,a),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",u).then(l=>this.authResponse(l))}authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{};let s=null;t.urlCallback||(s=ps(void 0));const r=new an(this.client);function i(){s==null||s.close(),r.unsubscribe()}const o={},a=t.requestKey;return a&&(o.requestKey=a),this.listAuthMethods(o).then(u=>{var p;const l=u.authProviders.find(f=>f.name===t.provider);if(!l)throw new X(new Error(`Missing or invalid provider "${t.provider}".`));const d=this.client.buildUrl("/api/oauth2-redirect"),h=a?(p=this.client.cancelControllers)==null?void 0:p[a]:void 0;return h&&(h.signal.onabort=()=>{i()}),new Promise(async(f,m)=>{var g;try{await r.subscribe("@oauth2",async b=>{var R;const S=r.clientId;try{if(!b.state||S!==b.state)throw new Error("State parameters don't match.");if(b.error||!b.code)throw new Error("OAuth2 redirect error or missing code: "+b.error);const E=Object.assign({},t);delete E.provider,delete E.scopes,delete E.createData,delete E.urlCallback,(R=h==null?void 0:h.signal)!=null&&R.onabort&&(h.signal.onabort=null);const j=await this.authWithOAuth2Code(l.name,b.code,l.codeVerifier,d,t.createData,E);f(j)}catch(E){m(new X(E))}i()});const y={state:r.clientId};(g=t.scopes)!=null&&g.length&&(y.scope=t.scopes.join(" "));const v=this._replaceQueryParams(l.authUrl+d,y);await(t.urlCallback||function(b){s?s.location.href=b:s=ps(b)})(v)}catch(y){i(),m(new X(y))}})}).catch(u=>{throw i(),u})}async authRefresh(e,t){let s={method:"POST"};return s=G("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",s,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",s).then(r=>this.authResponse(r))}async requestPasswordReset(e,t,s){let r={method:"POST",body:{email:e}};return r=G("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",r,t,s),this.client.send(this.baseCollectionPath+"/request-password-reset",r).then(()=>!0)}async confirmPasswordReset(e,t,s,r,i){let o={method:"POST",body:{token:e,password:t,passwordConfirm:s}};return o=G("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,r,i),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then(()=>!0)}async requestVerification(e,t,s){let r={method:"POST",body:{email:e}};return r=G("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",r,t,s),this.client.send(this.baseCollectionPath+"/request-verification",r).then(()=>!0)}async confirmVerification(e,t,s){let r={method:"POST",body:{token:e}};return r=G("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",r,t,s),this.client.send(this.baseCollectionPath+"/confirm-verification",r).then(()=>{const i=Ie(e),o=this.client.authStore.model;return o&&!o.verified&&o.id===i.id&&o.collectionId===i.collectionId&&(o.verified=!0,this.client.authStore.save(this.client.authStore.token,o)),!0})}async requestEmailChange(e,t,s){let r={method:"POST",body:{newEmail:e}};return r=G("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",r,t,s),this.client.send(this.baseCollectionPath+"/request-email-change",r).then(()=>!0)}async confirmEmailChange(e,t,s,r){let i={method:"POST",body:{token:e,password:t}};return i=G("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",i,s,r),this.client.send(this.baseCollectionPath+"/confirm-email-change",i).then(()=>{const o=Ie(e),a=this.client.authStore.model;return a&&a.id===o.id&&a.collectionId===o.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}async unlinkExternalAuth(e,t,s){return s=Object.assign({method:"DELETE"},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),s).then(()=>!0)}_replaceQueryParams(e,t={}){let s=e,r="";e.indexOf("?")>=0&&(s=e.substring(0,e.indexOf("?")),r=e.substring(e.indexOf("?")+1));const i={},o=r.split("&");for(const a of o){if(a=="")continue;const u=a.split("=");i[decodeURIComponent(u[0].replace(/\+/g," "))]=decodeURIComponent((u[1]||"").replace(/\+/g," "))}for(let a in t)t.hasOwnProperty(a)&&(t[a]==null?delete i[a]:i[a]=t[a]);r="";for(let a in i)i.hasOwnProperty(a)&&(r!=""&&(r+="&"),r+=encodeURIComponent(a.replace(/%20/g,"+"))+"="+encodeURIComponent(i[a].replace(/%20/g,"+")));return r!=""?s+"?"+r:s}}function ps(n){if(typeof window>"u"||!(window!=null&&window.open))throw new X(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,s=window.innerWidth,r=window.innerHeight;e=e>s?s:e,t=t>r?r:t;let i=s/2-e/2,o=r/2-t/2;return window.open(n,"popup_window","width="+e+",height="+t+",top="+o+",left="+i+",resizable,menubar=no")}class So extends Kt{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,s){return s=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},s),this.client.send(this.baseCrudPath+"/import",s).then(()=>!0)}}class xo extends Pe{async getList(e=1,t=30,s){return(s=Object.assign({method:"GET"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send("/api/logs",s)}async getOne(e,t){if(!e)throw new X({url:this.client.buildUrl("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class wo extends Pe{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class jo extends Pe{getUrl(e,t,s={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const r=[];r.push("api"),r.push("files"),r.push(encodeURIComponent(e.collectionId||e.collectionName)),r.push(encodeURIComponent(e.id)),r.push(encodeURIComponent(t));let i=this.client.buildUrl(r.join("/"));if(Object.keys(s).length){s.download===!1&&delete s.download;const o=new URLSearchParams(s);i+=(i.includes("?")?"&":"?")+o}return i}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class Co extends Pe{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class Po{constructor(e="/",t,s="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=s,this.authStore=t||new mo,this.admins=new yo(this),this.collections=new So(this),this.files=new jo(this),this.logs=new xo(this),this.settings=new go(this),this.realtime=new an(this),this.health=new wo(this),this.backups=new Co(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new bo(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let s in t){let r=t[s];switch(typeof r){case"boolean":case"number":r=""+r;break;case"string":r="'"+r.replace(/'/g,"\\'")+"'";break;default:r=r===null?"null":r instanceof Date?"'"+r.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(r).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+s+"}",r)}return e}getFileUrl(e,t,s={}){return this.files.getUrl(e,t,s)}buildUrl(e){var s;let t=this.baseUrl;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(s=window.location.origin)!=null&&s.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseUrl),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let s=this.buildUrl(e);if(this.beforeSend){const r=Object.assign({},await this.beforeSend(s,t));r.url!==void 0||r.options!==void 0?(s=r.url||s,t=r.options||t):Object.keys(r).length&&(t=r,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const r=this.serializeQueryParams(t.query);r&&(s+=(s.includes("?")?"&":"?")+r),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(s,t).then(async r=>{let i={};try{i=await r.json()}catch{}if(this.afterSend&&(i=await this.afterSend(r,i)),r.status>=400)throw new X({url:r.url,status:r.status,data:i});return i}).catch(r=>{throw new X(r)})}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=this.convertToFormDataIfNeeded(t.body),on(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const s=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(s);const r=new AbortController;this.cancelControllers[s]=r,t.signal=r.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(const s in e){const r=e[s];if(typeof r!="object"||this.hasBlobField({data:r})){const i=Array.isArray(r)?r:[r];for(let o of i)t.append(s,o)}else{let i={};i[s]=r,t.append("@jsonPayload",JSON.stringify(i))}}return t}hasBlobField(e){for(const t in e){const s=Array.isArray(e[t])?e[t]:[e[t]];for(const r of s)if(typeof Blob<"u"&&r instanceof Blob||typeof File<"u"&&r instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let s in e)if(s.toLowerCase()==t)return e[s];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const s in e){if(e[s]===null)continue;const r=e[s],i=encodeURIComponent(s);if(Array.isArray(r))for(const o of r)t.push(i+"="+encodeURIComponent(o));else r instanceof Date?t.push(i+"="+encodeURIComponent(r.toISOString())):typeof r!==null&&typeof r=="object"?t.push(i+"="+encodeURIComponent(JSON.stringify(r))):t.push(i+"="+encodeURIComponent(r))}return t.join("&")}}const Ue=new Po("http://127.0.0.1:8090/");Ue.autoCancellation(!1);var Eo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},Ro=function(e,t){return C.createElement(Cs,Ps({},e,{ref:t,icon:Eo}))},_o=C.forwardRef(Ro),Io={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.6 230.2L779.1 123.8a80.83 80.83 0 00-57.3-23.8c-21.7 0-42.1 8.5-57.4 23.8L549.8 238.4a80.83 80.83 0 00-23.8 57.3c0 21.7 8.5 42.1 23.8 57.4l83.8 83.8A393.82 393.82 0 01553.1 553 395.34 395.34 0 01437 633.8L353.2 550a80.83 80.83 0 00-57.3-23.8c-21.7 0-42.1 8.5-57.4 23.8L123.8 664.5a80.89 80.89 0 00-23.8 57.4c0 21.7 8.5 42.1 23.8 57.4l106.3 106.3c24.4 24.5 58.1 38.4 92.7 38.4 7.3 0 14.3-.6 21.2-1.8 134.8-22.2 268.5-93.9 376.4-201.7C828.2 612.8 899.8 479.2 922.3 344c6.8-41.3-6.9-83.8-36.7-113.8z"}}]},name:"phone",theme:"filled"},Oo=function(e,t){return C.createElement(Cs,Ps({},e,{ref:t,icon:Io}))},To=C.forwardRef(Oo);const ms="1.0",Mo=async()=>{zt("diagnosis").then(async n=>{const e=cn.getState().setDiagnosis;if(n===void 0||n.DATAVERSION!==ms){Oe.open({message:c.jsx("span",{children:c.jsx("strong",{children:"Downloading diagnosis"})}),key:"loadingDiagnosis",description:c.jsxs("p",{children:["The application is downloading diagnosis database in the background.",c.jsx("br",{}),"When it ends you will get another notifiction"]}),closable:!0,duration:0,placement:"bottomRight",icon:c.jsx(Ft,{})});const t=await Ue.collection("diseases").getFullList({sort:"disease"});qt("diagnosis",{records:t,DATAVERSION:ms}),e(t),Oe.destroy("loadingDiagnosis"),it.success({content:"Diagnosis database downloaded successfully",key:"loadingDiagnosis",duration:6})}else e(n.records)})};Mo();const ko=B(n=>({path:"/",fullPath:"",setPath:e=>n({path:e}),setFullPath:e=>n({fullPath:e})})),Lo=B(n=>({current:0,setCurrent:e=>n({current:e})})),Do=B(n=>({status:"new",setStatus:e=>n({status:e})}));B(n=>({current:"Home",setCurrent:e=>n({current:e})}));const cn=B(n=>({currentData:[],setDiagnosis:e=>{const t=e.map(s=>({label:s.disease,value:s.id}));n({currentData:t})}})),Ao=B(n=>({resultData:[],setResultData:e=>{const t=cn.getState().currentData,i=new ve(t,{keys:["label"],threshold:.2,ignoreLocation:!0,useExtendedSearch:!0}).search(e).map(o=>o.item);n({resultData:i})}})),Wt=B(n=>({selected:[],setSelected:e=>{n({selected:e})}}));B(n=>({loading:!1,setLoading:e=>{n({loading:e})}}));const Fo=B(n=>({basicInfo:{name:"محمد نبيل رفاعي أحمد",dob:Pt("2001-03-28"),sex:"male",address:"نامول - مركز طوخ - القليوبية",contactPhone:"01094778601",martialStatus:"single"},setBasicInfo:e=>{n({basicInfo:e})}})),{Header:No,Content:$o}=Es,Vo=C.memo(({children:n})=>{const{path:e,setPath:t,setFullPath:s}=ko(),r=q();C.useEffect(()=>{r.location.pathname.split("/")[1]===""?t(r.location.pathname):t(r.location.pathname.split("/")[1]),s(r.location.pathname)},[r.location.pathname]);const{token:{colorBgContainer:i,borderRadiusLG:o}}=Et.useToken();return c.jsxs(Es,{className:"main-app-container layout",children:[c.jsx(No,{style:{display:"flex",alignItems:"center",padding:"0 10px",backgroundColor:i,position:"sticky",top:0,zIndex:100},children:c.jsx(jn,{mode:"horizontal",selectedKeys:e,items:[{label:c.jsx(et,{to:"/",children:"Home"}),key:"/"},{label:c.jsx(et,{to:"/prescription",children:"New Prescription"}),key:"prescription"}],style:{flex:1},selectable:!1})}),c.jsx($o,{style:{padding:"0 24px",background:i,borderRadius:o,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:n})]})}),ht=$r({component:()=>c.jsx(c.Fragment,{children:c.jsx(Vo,{children:c.jsx(Bs,{})})})}),Bo="/assets/userpp-DZY4XV2b.webp",{Meta:Uo}=$e;function zo(){return c.jsxs(c.Fragment,{children:[c.jsx($e,{cover:c.jsx("img",{alt:"example",src:Bo,height:120}),style:{marginTop:12,display:"flex",width:"100%"},children:c.jsx(Uo,{title:"Dr: username",description:"Internal Medcine"})}),c.jsx("div",{className:"quick-access-container",children:c.jsx(et,{to:"/prescription",state:{consult:!1,newComer:!0},children:c.jsx(Ve,{size:"large",type:"primary",style:{width:"100%"},children:"New Prescription"})})})]})}var Ht={},st=function(){return st=Object.assign||function(n){for(var e,t=1,s=arguments.length;t<s;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},st.apply(this,arguments)},qo=function(){function n(e,t,s){var r=this;this.endVal=t,this.options=s,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(i){r.startTime||(r.startTime=i);var o=i-r.startTime;r.remaining=r.duration-o,r.useEasing?r.countDown?r.frameVal=r.startVal-r.easingFn(o,0,r.startVal-r.endVal,r.duration):r.frameVal=r.easingFn(o,r.startVal,r.endVal-r.startVal,r.duration):r.frameVal=r.startVal+(r.endVal-r.startVal)*(o/r.duration);var a=r.countDown?r.frameVal<r.endVal:r.frameVal>r.endVal;r.frameVal=a?r.endVal:r.frameVal,r.frameVal=Number(r.frameVal.toFixed(r.options.decimalPlaces)),r.printValue(r.frameVal),o<r.duration?r.rAF=requestAnimationFrame(r.count):r.finalEndVal!==null?r.update(r.finalEndVal):r.options.onCompleteCallback&&r.options.onCompleteCallback()},this.formatNumber=function(i){var o,a,u,l,d=i<0?"-":"";o=Math.abs(i).toFixed(r.options.decimalPlaces);var h=(o+="").split(".");if(a=h[0],u=h.length>1?r.options.decimal+h[1]:"",r.options.useGrouping){l="";for(var p=3,f=0,m=0,g=a.length;m<g;++m)r.options.useIndianSeparators&&m===4&&(p=2,f=1),m!==0&&f%p==0&&(l=r.options.separator+l),f++,l=a[g-m-1]+l;a=l}return r.options.numerals&&r.options.numerals.length&&(a=a.replace(/[0-9]/g,function(y){return r.options.numerals[+y]}),u=u.replace(/[0-9]/g,function(y){return r.options.numerals[+y]})),d+r.options.prefix+a+u+r.options.suffix},this.easeOutExpo=function(i,o,a,u){return a*(1-Math.pow(2,-10*i/u))*1024/1023+o},this.options=st(st({},this.defaults),s),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(t),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof e=="string"?document.getElementById(e):e,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,e):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return r.handleScroll(r)}),window.onscroll=function(){window.onScrollFns.forEach(function(i){return i()})},this.handleScroll(this)))}return n.prototype.handleScroll=function(e){if(e&&window&&!e.once){var t=window.innerHeight+window.scrollY,s=e.el.getBoundingClientRect(),r=s.top+window.pageYOffset,i=s.top+s.height+window.pageYOffset;i<t&&i>window.scrollY&&e.paused?(e.paused=!1,setTimeout(function(){return e.start()},e.options.scrollSpyDelay),e.options.scrollSpyOnce&&(e.once=!0)):(window.scrollY>i||r>t)&&!e.paused&&e.reset()}},n.prototype.determineDirectionAndSmartEasing=function(){var e=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>e;var t=e-this.startVal;if(Math.abs(t)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=e;var s=this.countDown?1:-1;this.endVal=e+s*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=e,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},n.prototype.start=function(e){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),e&&(this.options.onCompleteCallback=e),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},n.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},n.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},n.prototype.update=function(e){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(e),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},n.prototype.printValue=function(e){var t;if(this.el){var s=this.formattingFn(e);!((t=this.options.plugin)===null||t===void 0)&&t.render?this.options.plugin.render(this.el,s):this.el.tagName==="INPUT"?this.el.value=s:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=s:this.el.innerHTML=s}},n.prototype.ensureNumber=function(e){return typeof e=="number"&&!isNaN(e)},n.prototype.validateValue=function(e){var t=Number(e);return this.ensureNumber(t)?t:(this.error="[CountUp] invalid start or end value: ".concat(e),null)},n.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},n}();const Ko=Object.freeze(Object.defineProperty({__proto__:null,CountUp:qo},Symbol.toStringTag,{value:"Module"})),Wo=Cn(Ko);Object.defineProperty(Ht,"__esModule",{value:!0});var z=C,Ho=Wo;function Yo(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var s,r,i,o,a=[],u=!0,l=!1;try{if(i=(t=t.call(n)).next,e!==0)for(;!(u=(s=i.call(t)).done)&&(a.push(s.value),a.length!==e);u=!0);}catch(d){l=!0,r=d}finally{try{if(!u&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw r}}return a}}function gs(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,s)}return t}function nt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gs(Object(t),!0).forEach(function(s){Qo(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gs(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function Go(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Jo(n){var e=Go(n,"string");return typeof e=="symbol"?e:String(e)}function Qo(n,e,t){return e=Jo(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dt(){return Dt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Dt.apply(this,arguments)}function Xo(n,e){if(n==null)return{};var t={},s=Object.keys(n),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function ln(n,e){if(n==null)return{};var t=Xo(n,e),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function Zo(n,e){return ea(n)||Yo(n,e)||ta(n,e)||sa()}function ea(n){if(Array.isArray(n))return n}function ta(n,e){if(n){if(typeof n=="string")return ys(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ys(n,e)}}function ys(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=n[t];return s}function sa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var na=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?z.useLayoutEffect:z.useEffect;function ne(n){var e=z.useRef(n);return na(function(){e.current=n}),z.useCallback(function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return e.current.apply(void 0,s)},[])}var ra=function(e,t){var s=t.decimal,r=t.decimals,i=t.duration,o=t.easingFn,a=t.end,u=t.formattingFn,l=t.numerals,d=t.prefix,h=t.separator,p=t.start,f=t.suffix,m=t.useEasing,g=t.useGrouping,y=t.useIndianSeparators,v=t.enableScrollSpy,w=t.scrollSpyDelay,b=t.scrollSpyOnce,S=t.plugin;return new Ho.CountUp(e,a,{startVal:p,duration:i,decimal:s,decimalPlaces:r,easingFn:o,formattingFn:u,numerals:l,separator:h,prefix:d,suffix:f,plugin:S,useEasing:m,useIndianSeparators:y,useGrouping:g,enableScrollSpy:v,scrollSpyDelay:w,scrollSpyOnce:b})},ia=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],oa={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},un=function(e){var t=Object.fromEntries(Object.entries(e).filter(function(_){var L=Zo(_,2),T=L[1];return T!==void 0})),s=z.useMemo(function(){return nt(nt({},oa),t)},[e]),r=s.ref,i=s.startOnMount,o=s.enableReinitialize,a=s.delay,u=s.onEnd,l=s.onStart,d=s.onPauseResume,h=s.onReset,p=s.onUpdate,f=ln(s,ia),m=z.useRef(),g=z.useRef(),y=z.useRef(!1),v=ne(function(){return ra(typeof r=="string"?r:r.current,f)}),w=ne(function(_){var L=m.current;if(L&&!_)return L;var T=v();return m.current=T,T}),b=ne(function(){var _=function(){return w(!0).start(function(){u==null||u({pauseResume:S,reset:R,start:j,update:E})})};a&&a>0?g.current=setTimeout(_,a*1e3):_(),l==null||l({pauseResume:S,reset:R,update:E})}),S=ne(function(){w().pauseResume(),d==null||d({reset:R,start:j,update:E})}),R=ne(function(){w().el&&(g.current&&clearTimeout(g.current),w().reset(),h==null||h({pauseResume:S,start:j,update:E}))}),E=ne(function(_){w().update(_),p==null||p({pauseResume:S,reset:R,start:j})}),j=ne(function(){R(),b()}),x=ne(function(_){i&&(_&&R(),b())});return z.useEffect(function(){y.current?o&&x(!0):(y.current=!0,x())},[o,y,x,a,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.formattingFn]),z.useEffect(function(){return function(){R()}},[R]),{start:j,pauseResume:S,reset:R,update:E,getCountUp:w}},aa=["className","redraw","containerProps","children","style"],ca=function(e){var t=e.className,s=e.redraw,r=e.containerProps,i=e.children,o=e.style,a=ln(e,aa),u=z.useRef(null),l=z.useRef(!1),d=un(nt(nt({},a),{},{ref:u,startOnMount:typeof i!="function"||e.delay===0,enableReinitialize:!1})),h=d.start,p=d.reset,f=d.update,m=d.pauseResume,g=d.getCountUp,y=ne(function(){h()}),v=ne(function(S){e.preserveValue||p(),f(S)}),w=ne(function(){if(typeof e.children=="function"&&!(u.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}g()});z.useEffect(function(){w()},[w]),z.useEffect(function(){l.current&&v(e.end)},[e.end,v]);var b=s&&e;return z.useEffect(function(){s&&l.current&&y()},[y,s,b]),z.useEffect(function(){!s&&l.current&&y()},[y,s,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.className,e.formattingFn]),z.useEffect(function(){l.current=!0},[]),typeof i=="function"?i({countUpRef:u,start:h,reset:p,update:f,pauseResume:m,getCountUp:g}):z.createElement("span",Dt({className:t,ref:u,style:o},r),typeof e.start<"u"?g().formattingFn(e.start):"")},la=Ht.default=ca;Ht.useCountUp=un;const Ct=n=>c.jsx(la,{end:n,duration:2});function ua(){return c.jsxs("div",{className:"Statistics-container",children:[c.jsxs($e,{className:"Statistics-card",title:"Clinic statsics",children:[c.jsxs("div",{className:"Remaining-patients",children:[c.jsx(re,{color:"blue",className:"title blink tag",style:{height:"max-content"},children:"Current Queue"}),c.jsx(re,{className:"stat1 tag",children:c.jsx(pt,{value:10,title:"Total visits",formatter:Ct})}),c.jsx(re,{className:"stat2 tag",color:"green",children:c.jsx(pt,{value:4,title:"New comers",formatter:Ct})})]}),c.jsxs(re,{className:"finished tag",color:"green",children:[c.jsx(pt,{value:10,title:"Finished today",formatter:Ct}),c.jsx(_o,{style:{fontSize:"30px"}})]})]}),c.jsx($e,{className:"Statistics-card",title:"Money 💵"})]})}function da(){return c.jsxs("div",{className:"patient-card-wrapper",style:{width:"100%",display:"flex",flexDirection:"column",gap:"1.5em"},children:[c.jsx("h1",{children:" Current patient"}),c.jsx($e,{title:c.jsxs(et,{to:"/prescription/$id",params:{id:123},state:{consult:!0,newComer:!1},children:[c.jsx("span",{children:"Mohmed Nabil - (xx) "}),c.jsx(re,{color:"blue",children:"Consult"})]}),children:c.jsxs(pe,{size:"small",title:"main info",column:{md:3,sm:2},children:[c.jsx(pe.Item,{label:"Full name",span:{md:3,sm:2},children:"محمد نبيل رفاعي أحمد"}),c.jsx(pe.Item,{label:"Age",children:"23 years"}),c.jsx(pe.Item,{label:"sex",children:"Male"}),c.jsx(pe.Item,{label:"Address",children:"Namul"}),c.jsx(pe.Item,{label:"Last visit",children:"10/7/2024"}),c.jsx(pe.Item,{label:"notes",children:"Lorem ipsum dolor"})]})})]})}function ha(){return c.jsxs("div",{className:"home-container",children:[c.jsx(zo,{}),c.jsx(da,{}),c.jsx(ua,{})]})}const fa=C.memo(ha),pa=Vt("/")({component:()=>c.jsx(c.Fragment,{children:c.jsx(fa,{})})}),ma=C.memo(()=>{const{basicInfo:n,setBasicInfo:e}=Fo(),t=()=>{let s;const r=Pt().diff(n.dob,"dates");if(isNaN(r))s="Please select the date of birth (DOB) firsr";else{let i=r/31536e6,o=(i-Math.floor(i))*12,a=(o-Math.floor(o))*30;i=Math.floor(i),o=Math.floor(o),a=Math.floor(a);const u=`${i>0?`${i} ${i>1?"years":"year"} and`:""} `,l=`${o>0?`${o} ${o>1?"months":"month"} and`:""} `;s=`${u} ${l} ${a} ${a>1||a===0&&o>0?"days":"day"}`}return s};return c.jsxs("div",{className:"basic-info-wrapper",children:[c.jsx("h1",{children:"Basic Info"}),c.jsxs(I,{className:"form",layout:"vertical",initialValues:n,size:"large",variant:"filled",children:[c.jsx(I.Item,{label:"Name",name:"name",extra:c.jsx("span",{style:{userSelect:"none"},children:"يفضل كتابة الاسم باللغة العربية"}),children:c.jsx(Te,{style:{textAlign:"center",fontSize:22}})}),c.jsxs(I.Item,{label:"DOB",children:[c.jsx(Pn,{format:["DD-MM-YYYY","D-M-YYYY","D-MM-YYYY","DD-M-YYYY","DD/MM/YYYY","D/M/YYYY","D/MM/YYYY","DD/M/YYYY","DD\\MM\\YYYY","D\\M\\YYYY","D\\MM\\YYYY","DD\\M\\YYYY"],maxDate:Pt(),onChange:s=>e({...n,dob:s}),picker:"date",allowClear:!0,defaultValue:n.dob}),c.jsx(re,{style:{fontSize:18,padding:6,marginLeft:10},color:"geekblue",children:t()})]}),c.jsx(I.Item,{label:"Sex",name:"sex",children:c.jsxs(H.Group,{buttonStyle:"solid",children:[c.jsx(H.Button,{value:"male",children:"Male"}),c.jsx(H.Button,{value:"female",children:"Female"})]})}),c.jsx(I.Item,{label:"Address",name:"address",children:c.jsx(Te,{})}),c.jsx(I.Item,{label:"Contact Phone",name:"contactPhone",children:c.jsx(Be,{controls:!1,style:{width:"fit-content"},addonAfter:c.jsx(To,{style:{fontSize:22,color:"green"}})})}),c.jsx(I.Item,{label:"Martial status",name:"martialStatus",labelCol:4,children:c.jsxs(H.Group,{buttonStyle:"solid",children:[c.jsx(H.Button,{value:"single",children:"Single"}),c.jsx(H.Button,{value:"married",children:"Married"}),c.jsx(H.Button,{value:"widowed",children:"Widowed"})]})})]})]})}),ga=[{key:"1",label:"Chronic Diseases",children:c.jsx(re,{color:"green",className:"general-tag",children:"Diabetic, Hypertension, Diabetic, Hypertension"})},{key:"2",label:"Smoking",children:c.jsx(re,{color:"green",className:"general-tag",children:"True"})},{key:"3",label:"Allergy",children:c.jsx(re,{color:"red",className:"general-tag",children:"none"})},{key:"4",label:"Notes",children:c.jsx("span",{children:"No notes"})}],ya=C.memo(function(){return c.jsx(pe,{column:{md:2},title:"General Info",bordered:!0,items:ga})}),Ae=`
  A dog is a type of domesticated animal.
  Known for its loyalty and faithfulness,
  it can be found as a welcome guest in many households across the world.
`,va=[{key:"1",label:"This is panel header 1",children:c.jsx("p",{children:Ae})},{key:"2",label:"This is panel header 2",children:c.jsx("p",{children:Ae})},{key:"3",label:"This is panel header 3",children:c.jsx("p",{children:Ae})},{key:"4",label:"This is panel header 4",children:c.jsx("p",{children:Ae})},{key:"5",label:"This is panel header 5",children:c.jsx("p",{children:Ae})}],ba=C.memo(function(){return c.jsx(xe,{items:va,defaultActiveKey:["1"],size:"middle",destroyInactivePanel:!0})}),Sa=C.memo(()=>c.jsxs("div",{className:"past-history-wrabeer",children:[c.jsx("h1",{children:"Past history"}),c.jsx(ya,{}),c.jsx(ba,{})]})),xa=C.memo(function(){return c.jsxs(I,{size:"large",layout:"horizontal",children:[c.jsx(I.Item,{name:"allergies",children:c.jsx(Ce,{notFoundContent:c.jsx("p",{style:{textAlign:"right"},children:"ابدا بكتابة الحساسية الموجودة عند المريض"}),placeholder:"Start typing",mode:"tags",style:{width:"100%"}})}),c.jsx(I.Item,{name:"notes",label:"notes/other",children:c.jsx(Te.TextArea,{autoSize:!0})})]})}),wa=["ADD/ADHD","Arthritis","Asthma","Athletes Foot","Bed Wetting","Bleeding/Clotting Disorder","Bronchitis","Chicken Pox","Colds/Sore Throats","Constipation","Convulsions","Diabetes","Ear Infections","Epilepsy","Fainting","German Measles","Hay Fever","Headaches/Migraines","Hearing","Heart Defect/Disease","Hypertension","Kidney Disease","Measles","Mononucleosis","Motion Sickness","Mumps","Muscle Disease/Disorder","Nervous System Disorder","Sickle Cell Anemia","Sinusitis","Skeletal Disease/Disorder","Skin Conditions","Sleep Disturbance/Walking","Stomach Upsets","Urinary Tract Infections"],ja=wa.map(n=>({label:n,value:n}));function Ca(){return c.jsxs(I,{size:"large",layout:"horizontal",children:[c.jsx(I.Item,{name:"conditions",children:c.jsx(Ce,{options:ja,notFoundContent:c.jsx("p",{style:{textAlign:"right"}}),placeholder:"Start typing",mode:"tags",style:{width:"100%"}})}),c.jsx(I.Item,{name:"notes",label:"notes/other",children:c.jsx(Te.TextArea,{autoSize:!0})})]})}const Pa=["Appendectomy","Bariatric surgery","Brain surgery","Breast surgery","CABG (bypass)","Cesarean section","Cholecystectomy (gall bladder removal)","Colon surgery","Cosmetic surgery","Eye surgery","Fracture surgery","Hernia repair","Hysterectomy (ovaries remain)","Hysterectomy (ovaries removed)","Joint replacement","Prostate surgery","Small intestine surgery","Spine surgery","Tonsillectomy and Adenoidectomy","Tubal ligation (tubes tied)","Valve replacement","Vasectomy"],Ea=Pa.map(n=>({label:n,value:n}));function Ra(){return c.jsxs(I,{size:"large",layout:"horizontal",children:[c.jsx(I.Item,{name:"pastSurgicalHistory",children:c.jsx(Ce,{options:Ea,notFoundContent:c.jsx("p",{style:{textAlign:"right"}}),placeholder:"Start typing",mode:"tags",style:{width:"100%"}})}),c.jsx(I.Item,{name:"notes",label:"notes/other",children:c.jsx(Te.TextArea,{autoSize:!0})})]})}const _a=[{general:["fever","decreased/no energy","loss appetite","unintended","weight gain/loss"]},{head:["headache","injury"]},{ear:["difficulty with hearing","pain","discharge"]},{nose:["runny nose","nasal congestion","nose bleed"]},{"mouth/throat":["sore throat","difficulty swallowing","dental problems"]},{lung:["shortness of breath","coughing","chest pain","wheezing","sputum","blood in sputum"]},{heart:["pale","cyanosis","chest pain","leg swelling","faint"]},{gastrointestinal:["abdominal pain","nausea","vomiting","diarrhea","constipation","distention","blood in stool","black/tarry stool"]},{genitourinary:["painful urination","urine retention","incontinence","difficulty urinating","blood in urine"]},{musculoskeletal:["deformities","joint pain","joint swelling","difficulty in moving"]},{neurologic:["dizziness","weakness","hand shakiness","seizures"]},{skin:["rash","itching","color change","easy bruising/bleeding","change in mole"]},{Psychiatric:["frequent mood change","nervousness","tension","feeling down","unable to sleep at night"]}];function Ia(){return c.jsxs(I,{size:"large",layout:"vertical",children:[_a.map(n=>{const e=Object.entries(n)[0][0],t=Object.entries(n)[0][1];return c.jsx(I.Item,{name:e,label:e,initialValue:"none",children:c.jsxs(H.Group,{size:"middle",buttonStyle:"solid",optionType:"button",children:[t.map(s=>c.jsx(H.Button,{value:s,children:s},s)),c.jsx(H.Button,{value:"none",children:"none"},"none")]})},e)}),c.jsx(I.Item,{name:"notes",label:"notes/other",children:c.jsx(Te.TextArea,{autoSize:!0})})]})}function Oa(){return c.jsx(c.Fragment,{children:c.jsxs(xe,{destroyInactivePanel:!0,bordered:!1,accordion:!0,children:[c.jsx(xe.Panel,{header:"Allergies",children:c.jsx(xa,{})}),c.jsx(xe.Panel,{header:"Conditions",children:c.jsx(Ca,{})}),c.jsx(xe.Panel,{header:"Past Surgical History",children:c.jsx(Ra,{})}),c.jsx(xe.Panel,{header:"Review of Systems",children:c.jsx(Ia,{})})]})})}const Ta=C.memo(function(){const{resultData:e,setResultData:t}=Ao(),s=Wt(r=>r.setSelected);return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Diagnosis"}),c.jsx("br",{}),c.jsx(Ce,{size:"large",onSearch:r=>t(r),onChange:r=>s(r),mode:"multiple",placeholder:"Start adding diagnosis",style:{width:"100%"},filterOption:!1,options:e,allowClear:!0,labelInValue:!0,placement:"bottomLeft",maxCount:6})]})}),vs="1.0",Ma=async()=>{zt("drugs").then(async n=>{const e=dn.getState().setDrugs;if(n===void 0||n.DATAVERSION!==vs){Oe.open({message:c.jsx("span",{children:c.jsx("strong",{children:"Downloading drugs"})}),key:"loadingDrugs",description:c.jsxs("p",{children:["The application is downloading drugs database in the background.",c.jsx("br",{}),"When it ends you will get another notifiction"]}),closable:!0,duration:0,placement:"bottomRight",icon:c.jsx(Ft,{})});const t=await Ue.collection("drugs").getFullList({sort:"tradename",fields:"tradename,activeingredient,new_price"});qt("drugs",{records:t,DATAVERSION:vs}),e(t),Oe.destroy("loadingDrugs"),it.success({content:"Diagnosis database downloaded successfully",key:"loadingDiagnosis",duration:6})}else e(n.records)})};Ma();const dn=B(n=>({drugsData:[],setDrugs:e=>{const t=e.map(s=>({label:`${s.tradename}  |  ${s.new_price} L.E`,tradename:s.tradename,key:s.id,activeingredient:s.activeingredient,title:[s.tradename,s.activeingredient],value:`${s.tradename}  |  ${s.new_price} L.E`}));n({drugsData:t})}})),hn=B(n=>({type:!1,setType:e=>n({type:e})})),bs=B(n=>({searchValue:!1,setSearchValue:e=>n({searchValue:e})})),ka=B(n=>({resultData:[],setResultData:e=>{const t=dn.getState().drugsData,r=hn.getState().type===!0?{keys:["activeingredient"]}:{keys:["tradename"]},a=new ve(t,{...r,threshold:.2,useExtendedSearch:!0}).search(e,{limit:30}).map(u=>u.item);n({resultData:a})}})),Ss=B(n=>({selected:void 0,setSelected:e=>{n({selected:e})}})),de=B(n=>({selectedDrugs:[],setSelectedDrugs:e=>{n({selectedDrugs:e})},removeDrug:e=>{const t=de.getState().selectedDrugs;if(t.length>1){const s=t.filter(r=>r.id!==e);n({selectedDrugs:s})}else n({selectedDrugs:[]})},editDrug:(e,t)=>{const s=de.getState().selectedDrugs,r=s.findIndex(o=>o.id==e),i=s[r];s[r]={ke:e,...i,...t},console.log(s),n({selectedDrugs:s})}})),rt=B(n=>({modalStatus:!1,setModalStatus:e=>{n({modalStatus:e})},drugId:"",setDrugId:e=>{const t=de.getState().selectedDrugs;n({drugToEdit:t.find(s=>s.id===e)}),n({drugId:e})},drugToEdit:{}}));function La(){const[n]=I.useForm(),[e,t]=it.useMessage(),s=de(f=>f.setSelectedDrugs),r=de(f=>f.selectedDrugs),{resultData:i,setResultData:o}=ka(),a=bs(f=>f.searchValue),u=bs(f=>f.setSearchValue),l=hn(f=>f.setType),d=Ss(f=>f.setSelected),h=Ss(f=>f.selected),p=f=>{const m={tradename:f.drug.title[0],activeingredient:f.drug.title[1],dose:f.dose,doseType:f.doseType,duration:f.duration,durationType:f.durationType,id:f.drug.key};if(n.resetFields(),r.some(g=>g.id===f.drug.key)){e.error("الدواء تمت اضافته بالفعل");return}s([...r,m])};return c.jsxs(c.Fragment,{children:[t,c.jsxs("div",{className:"select-drugs-wrabber",children:[c.jsx("h3",{children:"Select Drugs"}),c.jsxs("div",{children:[c.jsx("label",{children:"activeingredient:"}),c.jsx(En,{onChange:f=>l(f)})]})]}),c.jsx("br",{}),c.jsxs(I,{form:n,name:"drugSelector",size:"large",layout:"inline",className:"form-container",onFinish:p,initialValues:{dose:2,doseType:"daily",duration:7,durationType:"days"},children:[c.jsxs("div",{className:"fields-wrabber",children:[c.jsx(I.Item,{name:"drug",onReset:()=>{d(void 0)},rules:[{required:!0,message:"Please select drug first!"}],children:c.jsx(Ce,{showSearch:!0,size:"large",onSearch:f=>{u(f),o(f)},searchValue:a,onChange:f=>{d(f)},placeholder:"Start adding drugs",filterOption:!1,style:{width:"100%"},options:i,status:a.length>0&&i.length===0?"error":"",allowClear:!0,labelInValue:!0})}),c.jsxs("div",{className:"details-wrapper",children:[c.jsxs("div",{className:"form-items-container",children:[c.jsx(I.Item,{style:{width:"200px"},name:"dose",children:c.jsx(Be,{disabled:h===void 0,name:"dose",addonBefore:"Dose",addonAfter:"unit",changeOnWheel:!0,min:1,max:6,controls:!1})}),c.jsx(I.Item,{name:"doseType",children:c.jsx(H.Group,{disabled:h===void 0,optionType:"button",buttonStyle:"solid",popupMatchSelectWidth:!1,options:[{label:"daily",value:"daily"},{label:"weekly",value:"weekly"}]})})]}),c.jsxs("div",{className:"form-items-container",children:[c.jsx(I.Item,{style:{width:"180px"},name:"duration",children:c.jsx(Be,{disabled:h===void 0,addonBefore:"Duration",changeOnWheel:!0,min:1,controls:!1})}),c.jsx(I.Item,{name:"durationType",children:c.jsx(H.Group,{disabled:h===void 0,optionType:"button",buttonStyle:"solid",popupMatchSelectWidth:!1,options:[{label:"days",value:"days"},{label:"weeks",value:"weeks"}]})})]})]})]}),c.jsx(Ve,{shape:"round",type:"primary",htmlType:"submit",children:"Add to Prescription"})]})]})}const Da="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20500%20610'%3e%3cpath%20d='M160%209C82%2033%2016%2095%204%20156c-13%2068%2027%20147%2059%20115%208-8%205-17-11-34-32-34-30-96%204-137C137%204%20300%200%20300%2094c0%2040-21%2070-59%2086-52%2021-62%2010-45-52%2019-72%2018-76-13-71C132%2065%20124%2070%20140%2080c12%208%2010%2026-14%20122C90%20347%2086%20358%2055%20370c-46%2017-26%2025%2055%2022%2044-2%2080-7%2080-11%200-5-11-6-25-3-30%205-31%200-7-93%2025-98%2043-97%2063%202l16%2078L200%20420C144%20502%2086%20557%2045%20564%2019%20569%2010%20576%2010%20590c0%2042%2069%2016%20123-45l64-83c26-34%2051-58%2055-54s11%2043%2014%2085l7%2077h48c26%200%2051-5%2054-10%204-6-6-10-23-10-29%200-30-2-37-53-3-28-11-75-17-104l-11-52%2043-56c49-63%2088-95%20118-95%2049%200%2072-32%2032-45-30-10-73%2019-143%2096l-65%2071-7-53c-6-46-5-55%2011-64%2097-54%20111-146%2029-181A264%20264%200%2000%20160%209'/%3e%3c/svg%3e",Aa=de.getState().removeDrug,At=rt.getState().setModalStatus,Fa=rt.getState().setDrugId,Na=[{title:c.jsx("img",{src:Da,width:25,style:{filter:"invert(100%)"}}),render:(n,e)=>c.jsx("h3",{children:e.key}),width:20,align:"center"},{title:"Tradename",dataIndex:"tradename",key:"tradename",className:"tradename-column"},{title:"Dosage",dataIndex:"dosage",key:"dosage",align:"center",className:"column"},{title:"Frequency",dataIndex:"frequency",key:"frequency",align:"center",responsive:["md"],className:"column"},{title:"Duration",dataIndex:"duration",key:"duration",align:"center",responsive:["md"],className:"column"},{title:"Action",key:"action",align:"center",render:(n,e)=>c.jsxs("div",{className:"actins-wrapper",children:[c.jsx(Ve,{icon:c.jsx(_n,{}),type:"default",onClick:()=>{At(!0),Fa(e.id)}}),c.jsx(Ve,{icon:c.jsx(In,{}),type:"dashed",danger:!0,onClick:()=>{Aa(e.id)}})]})}];function $a(){const n=de(r=>r.editDrug),[e]=I.useForm(),t=rt(r=>r.modalStatus),s=rt(r=>r.drugToEdit);return c.jsxs(Rn,{okButtonProps:{autoFocus:!0,htmlType:"submit"},closable:!1,open:t,centered:!0,destroyOnClose:!0,maskClosable:!1,onCancel:()=>At(!1),modalRender:r=>c.jsx(I,{form:e,onFinish:i=>{n(s.id,i),At(!1)},layout:"inline",className:"form-container",size:"large",name:"lol",clearOnDestroy:!0,children:r}),children:[c.jsxs("div",{className:"fields-wrabber",children:[c.jsxs("div",{children:[c.jsx("h1",{children:s.tradename}),c.jsx("br",{}),c.jsx(re,{color:"green",style:{textWrap:"pretty"},children:s.activeingredient})]}),c.jsxs("div",{className:"details-wrapper",children:[c.jsxs("div",{className:"form-items-container",style:{width:"100%",justifyContent:"space-around"},children:[c.jsx(I.Item,{style:{width:"200px"},name:"dose",initialValue:s.dose,children:c.jsx(Be,{name:"dose",addonBefore:"Dose",addonAfter:"unit",changeOnWheel:!0,min:1,max:6,controls:!1})}),c.jsx(I.Item,{name:"doseType",initialValue:s.doseType,children:c.jsx(H.Group,{optionType:"button",buttonStyle:"solid",popupMatchSelectWidth:!1,options:[{label:"daily",value:"daily"},{label:"weekly",value:"weekly"}]})})]}),c.jsx("br",{}),c.jsxs("div",{className:"form-items-container",style:{width:"100%",justifyContent:"space-around"},children:[c.jsx(I.Item,{style:{width:"200px"},name:"duration",initialValue:s.duration,children:c.jsx(Be,{addonBefore:"Duration",changeOnWheel:!0,min:1,controls:!1})}),c.jsx(I.Item,{name:"durationType",initialValue:s.durationType,children:c.jsx(H.Group,{optionType:"button",buttonStyle:"solid",popupMatchSelectWidth:!1,options:[{label:"days",value:"days"},{label:"weeks",value:"weeks"}]})})]})]})]}),c.jsx("br",{}),c.jsx("br",{})]})}const xs="1.0",Va=async()=>{zt("treatments").then(async n=>{const e=fn.getState().setTreatments;if(n===void 0||n.DATAVERSION!==xs){Oe.open({message:c.jsx("span",{children:c.jsx("strong",{children:"Downloading treatments"})}),key:"loadingTreatments",description:c.jsxs("p",{children:["The application is downloading treatments database in the background.",c.jsx("br",{}),"When it ends you will get another notifiction"]}),closable:!0,duration:0,placement:"bottomRight",icon:c.jsx(Ft,{})});const t=await Ue.collection("treatments").getFullList({sort:"procedure"});qt("treatments",{records:t,DATAVERSION:xs}),e(t),Oe.destroy("loadingTreatments"),it.success({content:"Treatments database downloaded successfully",key:"loadingTreatments",duration:6})}else e(n.records)})};Va();const fn=B(n=>({treatmentsData:[],setTreatments:e=>{const t=e.map(s=>({label:s.procedure,value:s.procedure,key:s.id}));n({treatmentsData:t})}})),Ba=B(n=>({resultData:[],setResultData:e=>{const t=fn.getState().treatmentsData,i=new ve(t,{keys:["label"],threshold:.2,useExtendedSearch:!0}).search(e,{limit:30}).map(o=>o.item);n({resultData:i})}})),pn=B(n=>({selectedTreatments:[],setSelectedTreatments:e=>{n({selectedTreatments:e})}}));function Ua(){const n=Wt(s=>s.selected),{selectedDrugs:e}=de(),{selectedTreatments:t}=pn();return c.jsx(On,{size:"large",bordered:!0,className:"table-wrapper",rowKey:"id",pagination:!1,columns:Na,footer:()=>c.jsx("p",{style:{fontSize:16},children:t.length>0&&c.jsxs(c.Fragment,{children:["Treatments: ",c.jsx("br",{}),t.map((s,r)=>c.jsxs("strong",{children:[r+1,": ",s.label,t[t.length-1].value===s.value?"":" - "]},s.id))]})}),dataSource:e.map(({tradename:s,activeingredient:r,dose:i,doseType:o,duration:a,durationType:u,id:l},d)=>{const h=`Every ${Math.trunc(24/i)} hours`;return{tradename:c.jsxs("div",{children:[c.jsx("h3",{children:s}),r.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("br",{}),c.jsx(re,{color:"green",style:{textWrap:"pretty"},children:r})]})]}),dosage:`${i} units | ${o}`,frequency:h,duration:`For ${a} ${u}`,key:d+1,id:l}}),title:()=>c.jsxs(c.Fragment,{children:[c.jsx("h1",{children:"Current Drugs"}),c.jsx("p",{style:{fontSize:16},children:n.length>0&&c.jsxs(c.Fragment,{children:["Diagnosis: ",c.jsx("br",{}),n.map((s,r)=>c.jsxs("strong",{children:[r+1,": ",s.label,n[n.length-1].value===s.value?"":" - "]},s.id))]})})]})})}function za(){const{resultData:n,setResultData:e}=Ba(),{setSelectedTreatments:t}=pn();return c.jsxs(c.Fragment,{children:[c.jsx("br",{}),c.jsx(Ce,{size:"large",onSearch:s=>e(s),onChange:s=>t(s),mode:"multiple",placeholder:"Start adding diagnosis",style:{width:"100%"},filterOption:!1,options:n,allowClear:!0,labelInValue:!0,placement:"bottomLeft",maxCount:6})]})}const qa=C.memo(function(){return c.jsxs(Ye,{theme:{components:{}},children:[c.jsx($a,{}),c.jsxs("div",{className:"current-history-wrapper",children:[c.jsxs(xe,{defaultActiveKey:2,size:"large",bordered:!1,expandIconPosition:"end",destroyInactivePanel:!0,children:[c.jsx(mt,{header:"previous illnesses or conditions",children:c.jsx(Oa,{})},1),c.jsxs(mt,{header:c.jsx("h3",{children:"Diagnosis & Drugs"}),children:[c.jsx(Ta,{}),c.jsx("br",{}),c.jsx("br",{}),c.jsx(La,{})]},2),c.jsx(mt,{header:c.jsx("h3",{children:"Treatments"}),children:c.jsx(za,{})},3)]}),c.jsx("br",{}),c.jsx("br",{}),c.jsx(Ua,{}),c.jsx("br",{})]})]})}),Ka=B(n=>({queryResult:[],searchValue:"",setQueryResult:async e=>{if(e.length>1){const t=await Ue.collection("patients").getList(1,20,{filter:`name ~ "${e}"`,fields:"name,address,id"});console.log(t),n({queryResult:t.items})}},setSearchValue:e=>n({searchValue:e})}));function Wa(){const n=Ka(e=>e.setQueryResult);return c.jsx(Ce,{showSearch:!0,size:"large",onSearch:e=>n(e),notFoundContent:c.jsxs(c.Fragment,{children:[c.jsx("h3",{style:{textAlign:"center",color:"white"},children:"المريض غير مسجل على قاعدة البيانات"}),c.jsx("br",{}),c.jsxs(Ve,{size:"large",style:{width:"100%"},children:["اضافة مريض جديد",c.jsx("br",{})]})]}),style:{width:"100%"}})}new Array(100).fill({label:"patient name"});let He;const mn=C.memo(({id:n=null})=>{const{current:e,setCurrent:t}=Lo(),s=de(u=>u.setSelectedDrugs),r=Wt(u=>u.setSelected),{status:i,setStatus:o}=Do(),a=q({select:u=>u.location.state});switch(C.useEffect(()=>{a.hasOwnProperty("consult")&&(a.consult&&o("consult"),a.newComer&&o("new"))},[a]),C.useEffect(()=>{t(0),s([]),r([])},[]),e){case 0:He=c.jsx(ma,{});break;case 1:He=c.jsx(Sa,{});break;case 2:He=c.jsx(qa,{});break}return c.jsxs("div",{className:"prescription-wrapper",children:[!n&&c.jsx(Wa,{}),c.jsx(Tn,{size:"large",block:!0,onChange:u=>o(u),defaultValue:a.consult?"consult":"new",options:[{label:"New comer",value:"new"},{label:"Consult",value:"consult"}],style:{width:"100%"}}),c.jsx(Mn,{className:"select",current:e,items:[{title:"Basic info"},{title:"Past history"},{title:"Current history"}],onChange:u=>{t(u)}}),c.jsx("div",{className:"content",children:He})]})}),Ha=Vt("/prescription/")({component:()=>c.jsx(mn,{})}),gn=Vt("/prescription/$id")({component:()=>{const{id:n}=gn.useParams();return c.jsx(mn,{id:n})}}),Ya=pa.update({path:"/",getParentRoute:()=>ht}),Ga=Ha.update({path:"/prescription/",getParentRoute:()=>ht}),Ja=gn.update({path:"/prescription/$id",getParentRoute:()=>ht}),Qa=ht.addChildren({IndexRoute:Ya,PrescriptionIdRoute:Ja,PrescriptionIndexRoute:Ga});function Xa(){const n=Er({routeTree:Qa});return Ye.config({holderRender:e=>c.jsx(Ye,{prefixCls:"static",theme:{algorithm:Et.darkAlgorithm},children:e})}),c.jsx(Ye,{theme:{algorithm:Et.darkAlgorithm},children:c.jsx(Gr,{router:n})})}Rt.createRoot(document.getElementById("root")).render(c.jsx(js.StrictMode,{children:c.jsx(Xa,{})}));
